<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <meta name="nodejs.org:node-version" content="v15.5.1">
  <title>QUIC | Node.js v15.5.1 Documentation</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700,400italic&display=fallback">
  <link rel="stylesheet" href="assets/style.css">
  <link rel="stylesheet" href="assets/hljs.css">
  <link rel="canonical" href="https://nodejs.org/api/quic.html">
</head>
<body class="alt apidoc" id="api-section-quic">
  <div id="content" class="clearfix">
    <div id="column2" class="interior">
      <div id="intro" class="interior">
        <a href="/" title="Go back to the home page">
          Node.js
        </a>
      </div>
      <ul>
<li><a href="documentation.html" class="nav-documentation">About this documentation</a></li>
<li><a href="synopsis.html" class="nav-synopsis">Usage and example</a></li>
</ul>
<hr class="line">
<ul>
<li><a href="assert.html" class="nav-assert">Assertion testing</a></li>
<li><a href="async_hooks.html" class="nav-async_hooks">Async hooks</a></li>
<li><a href="buffer.html" class="nav-buffer">Buffer</a></li>
<li><a href="addons.html" class="nav-addons">C++ addons</a></li>
<li><a href="n-api.html" class="nav-n-api">C/C++ addons with N-API</a></li>
<li><a href="embedding.html" class="nav-embedding">C++ embedder API</a></li>
<li><a href="child_process.html" class="nav-child_process">Child processes</a></li>
<li><a href="cluster.html" class="nav-cluster">Cluster</a></li>
<li><a href="cli.html" class="nav-cli">Command-line options</a></li>
<li><a href="console.html" class="nav-console">Console</a></li>
<li><a href="crypto.html" class="nav-crypto">Crypto</a></li>
<li><a href="debugger.html" class="nav-debugger">Debugger</a></li>
<li><a href="deprecations.html" class="nav-deprecations">Deprecated APIs</a></li>
<li><a href="diagnostics_channel.html" class="nav-diagnostics_channel">Diagnostics Channel</a></li>
<li><a href="dns.html" class="nav-dns">DNS</a></li>
<li><a href="domain.html" class="nav-domain">Domain</a></li>
<li><a href="errors.html" class="nav-errors">Errors</a></li>
<li><a href="events.html" class="nav-events">Events</a></li>
<li><a href="fs.html" class="nav-fs">File system</a></li>
<li><a href="globals.html" class="nav-globals">Globals</a></li>
<li><a href="http.html" class="nav-http">HTTP</a></li>
<li><a href="http2.html" class="nav-http2">HTTP/2</a></li>
<li><a href="https.html" class="nav-https">HTTPS</a></li>
<li><a href="inspector.html" class="nav-inspector">Inspector</a></li>
<li><a href="intl.html" class="nav-intl">Internationalization</a></li>
<li><a href="modules.html" class="nav-modules">Modules: CommonJS modules</a></li>
<li><a href="esm.html" class="nav-esm">Modules: ECMAScript modules</a></li>
<li><a href="module.html" class="nav-module">Modules: <code>module</code> API</a></li>
<li><a href="packages.html" class="nav-packages">Modules: Packages</a></li>
<li><a href="net.html" class="nav-net">Net</a></li>
<li><a href="os.html" class="nav-os">OS</a></li>
<li><a href="path.html" class="nav-path">Path</a></li>
<li><a href="perf_hooks.html" class="nav-perf_hooks">Performance hooks</a></li>
<li><a href="policy.html" class="nav-policy">Policies</a></li>
<li><a href="process.html" class="nav-process">Process</a></li>
<li><a href="punycode.html" class="nav-punycode">Punycode</a></li>
<li><a href="querystring.html" class="nav-querystring">Query strings</a></li>
<li><a href="quic.html" class="nav-quic active">QUIC</a></li>
<li><a href="readline.html" class="nav-readline">Readline</a></li>
<li><a href="repl.html" class="nav-repl">REPL</a></li>
<li><a href="report.html" class="nav-report">Report</a></li>
<li><a href="stream.html" class="nav-stream">Stream</a></li>
<li><a href="string_decoder.html" class="nav-string_decoder">String decoder</a></li>
<li><a href="timers.html" class="nav-timers">Timers</a></li>
<li><a href="tls.html" class="nav-tls">TLS/SSL</a></li>
<li><a href="tracing.html" class="nav-tracing">Trace events</a></li>
<li><a href="tty.html" class="nav-tty">TTY</a></li>
<li><a href="dgram.html" class="nav-dgram">UDP/datagram</a></li>
<li><a href="url.html" class="nav-url">URL</a></li>
<li><a href="util.html" class="nav-util">Utilities</a></li>
<li><a href="v8.html" class="nav-v8">V8</a></li>
<li><a href="vm.html" class="nav-vm">VM</a></li>
<li><a href="wasi.html" class="nav-wasi">WASI</a></li>
<li><a href="webcrypto.html" class="nav-webcrypto">Web Crypto API</a></li>
<li><a href="worker_threads.html" class="nav-worker_threads">Worker threads</a></li>
<li><a href="zlib.html" class="nav-zlib">Zlib</a></li>
</ul>
<hr class="line">
<ul>
<li><a href="https://github.com/nodejs/node" class="nav-https-github-com-nodejs-node">Code repository and issue tracker</a></li>
</ul>
    </div>

    <div id="column1" data-id="quic" class="interior">
      <header>
        <h1>Node.js v15.5.1 Documentation</h1>
        <div id="gtoc">
          <ul>
            <li>
              <a href="index.html">Index</a>
            </li>
            <li>
              <a href="all.html">View on single page</a>
            </li>
            <li>
              <a href="quic.json">View as JSON</a>
            </li>
            
    <li class="version-picker">
      <a href="#">View another version <span>&#x25bc;</span></a>
      <ol class="version-picker"><li><a href="https://nodejs.org/docs/latest-v15.x/api/quic.html">15.x</a></li></ol>
    </li>
  
            <li class="edit_on_github"><a href="https://github.com/nodejs/node/edit/master/doc/api/quic.md"><span class="github_icon"><svg height="16" width="16" viewBox="0 0 16.1 16.1" fill="currentColor"><path d="M8 0a8 8 0 0 0-2.5 15.6c.4 0 .5-.2.5-.4v-1.5c-2 .4-2.5-.5-2.7-1 0-.1-.5-.9-.8-1-.3-.2-.7-.6 0-.6.6 0 1 .6 1.2.8.7 1.2 1.9 1 2.4.7 0-.5.2-.9.5-1-1.8-.3-3.7-1-3.7-4 0-.9.3-1.6.8-2.2 0-.2-.3-1 .1-2 0 0 .7-.3 2.2.7a7.4 7.4 0 0 1 4 0c1.5-1 2.2-.8 2.2-.8.5 1.1.2 2 .1 2.1.5.6.8 1.3.8 2.2 0 3-1.9 3.7-3.6 4 .3.2.5.7.5 1.4v2.2c0 .2.1.5.5.4A8 8 0 0 0 16 8a8 8 0 0 0-8-8z"/></svg></span>Edit on GitHub</a></li>
          </ul>
        </div>
        <hr>
      </header>

      <div id="toc">
        <h2>Table of Contents</h2>
        <ul>
<li><span class="stability_1"><a href="#quic_quic">QUIC</a></span>
<ul>
<li><a href="#quic_example">Example</a></li>
<li><a href="#quic_quic_basics">QUIC basics</a>
<ul>
<li><a href="#quic_quicsocket">QuicSocket</a></li>
<li><a href="#quic_client_and_server_quicsessions">Client and server QuicSessions</a></li>
<li><a href="#quic_quicsession_and_alpn">QuicSession and ALPN</a></li>
<li><a href="#quic_quicstream">QuicStream</a>
<ul>
<li><a href="#quic_quicstream_headers">QuicStream headers</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#quic_quic_and_http_3">QUIC and HTTP/3</a></li>
<li><a href="#quic_quic_javascript_api">QUIC JavaScript API</a>
<ul>
<li><a href="#quic_net_createquicsocket_options"><code>net.createQuicSocket([options])</code></a></li>
<li><a href="#quic_class_quicendpoint">Class: <code>QuicEndpoint</code></a>
<ul>
<li><a href="#quic_quicendpoint_addmembership_address_iface"><code>quicendpoint.addMembership(address, iface)</code></a></li>
<li><a href="#quic_quicendpoint_address"><code>quicendpoint.address</code></a></li>
<li><a href="#quic_quicendpoint_bind_options"><code>quicendpoint.bind([options])</code></a></li>
<li><a href="#quic_quicendpoint_bound"><code>quicendpoint.bound</code></a></li>
<li><a href="#quic_quicendpoint_close"><code>quicendpoint.close()</code></a></li>
<li><a href="#quic_quicendpoint_closing"><code>quicendpoint.closing</code></a></li>
<li><a href="#quic_quicendpoint_destroy_error"><code>quicendpoint.destroy([error])</code></a></li>
<li><a href="#quic_quicendpoint_destroyed"><code>quicendpoint.destroyed</code></a></li>
<li><a href="#quic_quicendpoint_dropmembership_address_iface"><code>quicendpoint.dropMembership(address, iface)</code></a></li>
<li><a href="#quic_quicendpoint_fd"><code>quicendpoint.fd</code></a></li>
<li><a href="#quic_quicendpoint_pending"><code>quicendpoint.pending</code></a></li>
<li><a href="#quic_quicendpoint_ref"><code>quicendpoint.ref()</code></a></li>
<li><a href="#quic_quicendpoint_setbroadcast_on"><code>quicendpoint.setBroadcast([on])</code></a></li>
<li><a href="#quic_quicendpoint_setmulticastinterface_iface"><code>quicendpoint.setMulticastInterface(iface)</code></a>
<ul>
<li><a href="#quic_examples_ipv6_outgoing_multicast_interface">Examples: IPv6 outgoing multicast interface</a></li>
<li><a href="#quic_example_ipv4_outgoing_multicast_interface">Example: IPv4 outgoing multicast interface</a></li>
<li><a href="#quic_call_results">Call results</a></li>
</ul>
</li>
<li><a href="#quic_quicendpoint_setmulticastloopback_on"><code>quicendpoint.setMulticastLoopback([on])</code></a></li>
<li><a href="#quic_quicendpoint_setmulticastttl_ttl"><code>quicendpoint.setMulticastTTL(ttl)</code></a></li>
<li><a href="#quic_quicendpoint_setttl_ttl"><code>quicendpoint.setTTL(ttl)</code></a></li>
<li><a href="#quic_quicendpoint_unref"><code>quicendpoint.unref()</code></a></li>
</ul>
</li>
<li><a href="#quic_class_quicsession_extends_eventemitter">Class: <code>QuicSession extends EventEmitter</code></a>
<ul>
<li><a href="#quic_event_close">Event: <code>'close'</code></a></li>
<li><a href="#quic_event_error">Event: <code>'error'</code></a></li>
<li><a href="#quic_event_keylog">Event: <code>'keylog'</code></a></li>
<li><a href="#quic_event_pathvalidation">Event: <code>'pathValidation'</code></a></li>
<li><a href="#quic_event_secure">Event: <code>'secure'</code></a></li>
<li><a href="#quic_event_stream">Event: <code>'stream'</code></a></li>
<li><a href="#quic_quicsession_ackdelayretransmitcount"><code>quicsession.ackDelayRetransmitCount</code></a></li>
<li><a href="#quic_quicsession_address"><code>quicsession.address</code></a></li>
<li><a href="#quic_quicsession_alpnprotocol"><code>quicsession.alpnProtocol</code></a></li>
<li><a href="#quic_quicsession_authenticated"><code>quicsession.authenticated</code></a></li>
<li><a href="#quic_quicsession_authenticationerror"><code>quicsession.authenticationError</code></a></li>
<li><a href="#quic_quicsession_bidistreamcount"><code>quicsession.bidiStreamCount</code></a></li>
<li><a href="#quic_quicsession_blockcount"><code>quicsession.blockCount</code></a></li>
<li><a href="#quic_quicsession_bytesinflight"><code>quicsession.bytesInFlight</code></a></li>
<li><a href="#quic_quicsession_bytesreceived"><code>quicsession.bytesReceived</code></a></li>
<li><a href="#quic_quicsession_bytessent"><code>quicsession.bytesSent</code></a></li>
<li><a href="#quic_quicsession_cipher"><code>quicsession.cipher</code></a></li>
<li><a href="#quic_quicsession_close"><code>quicsession.close()</code></a></li>
<li><a href="#quic_quicsession_closecode"><code>quicsession.closeCode</code></a></li>
<li><a href="#quic_quicsession_closing"><code>quicsession.closing</code></a></li>
<li><a href="#quic_quicsession_destroy_error"><code>quicsession.destroy([error])</code></a></li>
<li><a href="#quic_quicsession_destroyed"><code>quicsession.destroyed</code></a></li>
<li><a href="#quic_quicsession_duration"><code>quicsession.duration</code></a></li>
<li><a href="#quic_quicsession_getcertificate"><code>quicsession.getCertificate()</code></a></li>
<li><a href="#quic_quicsession_getpeercertificate_detailed"><code>quicsession.getPeerCertificate([detailed])</code></a></li>
<li><a href="#quic_quicsession_handshakeackhistogram"><code>quicsession.handshakeAckHistogram</code></a></li>
<li><a href="#quic_quicsession_handshakecontinuationhistogram"><code>quicsession.handshakeContinuationHistogram</code></a></li>
<li><a href="#quic_quicsession_handshakecomplete"><code>quicsession.handshakeComplete</code></a></li>
<li><a href="#quic_quicsession_handshakeconfirmed"><code>quicsession.handshakeConfirmed</code></a></li>
<li><a href="#quic_quicsession_handshakeduration"><code>quicsession.handshakeDuration</code></a></li>
<li><a href="#quic_quicsession_idletimeout"><code>quicsession.idleTimeout</code></a></li>
<li><a href="#quic_quicsession_keyupdatecount"><code>quicsession.keyUpdateCount</code></a></li>
<li><a href="#quic_quicsession_latestrtt"><code>quicsession.latestRTT</code></a></li>
<li><a href="#quic_quicsession_lossretransmitcount"><code>quicsession.lossRetransmitCount</code></a></li>
<li><a href="#quic_quicsession_maxdataleft"><code>quicsession.maxDataLeft</code></a></li>
<li><a href="#quic_quicsession_maxinflightbytes"><code>quicsession.maxInFlightBytes</code></a></li>
<li><a href="#quic_quicsession_maxstreams"><code>quicsession.maxStreams</code></a></li>
<li><a href="#quic_quicsession_minrtt"><code>quicsession.minRTT</code></a></li>
<li><a href="#quic_quicsession_openstream_options"><code>quicsession.openStream([options])</code></a></li>
<li><a href="#quic_quicsession_ping"><code>quicsession.ping()</code></a></li>
<li><a href="#quic_quicsession_peerinitiatedstreamcount"><code>quicsession.peerInitiatedStreamCount</code></a></li>
<li><a href="#quic_quicsession_qlog"><code>quicsession.qlog</code></a></li>
<li><a href="#quic_quicsession_remoteaddress"><code>quicsession.remoteAddress</code></a></li>
<li><a href="#quic_quicsession_selfinitiatedstreamcount"><code>quicsession.selfInitiatedStreamCount</code></a></li>
<li><a href="#quic_quicsession_servername"><code>quicsession.servername</code></a></li>
<li><a href="#quic_quicsession_smoothedrtt"><code>quicsession.smoothedRTT</code></a></li>
<li><a href="#quic_quicsession_socket"><code>quicsession.socket</code></a></li>
<li><a href="#quic_quicsession_statelessreset"><code>quicsession.statelessReset</code></a></li>
<li><a href="#quic_quicsession_unistreamcount"><code>quicsession.uniStreamCount</code></a></li>
<li><a href="#quic_quicsession_updatekey"><code>quicsession.updateKey()</code></a></li>
<li><a href="#quic_quicsession_usingearlydata"><code>quicsession.usingEarlyData</code></a></li>
</ul>
</li>
<li><a href="#quic_class_quicclientsession_extends_quicsession">Class: <code>QuicClientSession extends QuicSession</code></a>
<ul>
<li><a href="#quic_event_sessionticket">Event: <code>'sessionTicket'</code></a></li>
<li><a href="#quic_event_qlog">Event: <code>'qlog'</code></a></li>
<li><a href="#quic_event_usepreferredaddress">Event: <code>'usePreferredAddress'</code></a></li>
<li><a href="#quic_quicclientsession_ephemeralkeyinfo"><code>quicclientsession.ephemeralKeyInfo</code></a></li>
<li><a href="#quic_quicclientsession_setsocket_socket_natrebinding"><code>quicclientsession.setSocket(socket[, natRebinding])</code></a></li>
</ul>
</li>
<li><a href="#quic_class_quicserversession_extends_quicsession">Class: <code>QuicServerSession extends QuicSession</code></a></li>
<li><a href="#quic_class_quicsocket">Class: <code>QuicSocket</code></a>
<ul>
<li><a href="#quic_event_busy">Event: <code>'busy'</code></a></li>
<li><a href="#quic_event_close_1">Event: <code>'close'</code></a></li>
<li><a href="#quic_event_endpointclose">Event: <code>'endpointClose'</code></a></li>
<li><a href="#quic_event_error_1">Event: <code>'error'</code></a></li>
<li><a href="#quic_event_listening">Event: <code>'listening'</code></a></li>
<li><a href="#quic_event_ready">Event: <code>'ready'</code></a></li>
<li><a href="#quic_event_session">Event: <code>'session'</code></a></li>
<li><a href="#quic_event_sessionerror">Event: <code>'sessionError'</code></a></li>
<li><a href="#quic_quicsocket_addendpoint_options"><code>quicsocket.addEndpoint(options)</code></a></li>
<li><a href="#quic_quicsocket_blocklist"><code>quicsocket.blockList</code></a></li>
<li><a href="#quic_quicsocket_bound"><code>quicsocket.bound</code></a></li>
<li><a href="#quic_quicsocket_boundduration"><code>quicsocket.boundDuration</code></a></li>
<li><a href="#quic_quicsocket_bytesreceived"><code>quicsocket.bytesReceived</code></a></li>
<li><a href="#quic_quicsocket_bytessent"><code>quicsocket.bytesSent</code></a></li>
<li><a href="#quic_quicsocket_clientsessions"><code>quicsocket.clientSessions</code></a></li>
<li><a href="#quic_quicsocket_close"><code>quicsocket.close()</code></a></li>
<li><a href="#quic_quicsocket_connect_options"><code>quicsocket.connect([options])</code></a></li>
<li><a href="#quic_quicsocket_destroy_error"><code>quicsocket.destroy([error])</code></a></li>
<li><a href="#quic_quicsocket_destroyed"><code>quicsocket.destroyed</code></a></li>
<li><a href="#quic_quicsocket_duration"><code>quicsocket.duration</code></a></li>
<li><a href="#quic_quicsocket_endpoints"><code>quicsocket.endpoints</code></a></li>
<li><a href="#quic_quicsocket_listen_options"><code>quicsocket.listen([options])</code></a></li>
<li><a href="#quic_quicsocket_listenduration"><code>quicsocket.listenDuration</code></a></li>
<li><a href="#quic_quicsocket_listening"><code>quicsocket.listening</code></a></li>
<li><a href="#quic_quicsocket_packetsignored"><code>quicsocket.packetsIgnored</code></a></li>
<li><a href="#quic_quicsocket_packetsreceived"><code>quicsocket.packetsReceived</code></a></li>
<li><a href="#quic_quicsocket_packetssent"><code>quicsocket.packetsSent</code></a></li>
<li><a href="#quic_quicsocket_pending"><code>quicsocket.pending</code></a></li>
<li><a href="#quic_quicsocket_ref"><code>quicsocket.ref()</code></a></li>
<li><a href="#quic_quicsocket_serverbusy"><code>quicsocket.serverBusy</code></a></li>
<li><a href="#quic_quicsocket_serverbusycount"><code>quicsocket.serverBusyCount</code></a></li>
<li><a href="#quic_quicsocket_serversessions"><code>quicsocket.serverSessions</code></a></li>
<li><a href="#quic_quicsocket_setdiagnosticpacketloss_options"><code>quicsocket.setDiagnosticPacketLoss(options)</code></a></li>
<li><a href="#quic_quicsocket_statelessreset"><code>quicsocket.statelessReset</code></a></li>
<li><a href="#quic_quicsocket_statelessresetcount"><code>quicsocket.statelessResetCount</code></a></li>
<li><a href="#quic_quicsocket_unref"><code>quicsocket.unref();</code></a></li>
</ul>
</li>
<li><a href="#quic_class_quicstream_extends_stream_duplex">Class: <code>QuicStream extends stream.Duplex</code></a>
<ul>
<li><a href="#quic_event_blocked">Event: <code>'blocked'</code></a></li>
<li><a href="#quic_event_close_2">Event: <code>'close'</code></a></li>
<li><a href="#quic_event_data">Event: <code>'data'</code></a></li>
<li><a href="#quic_event_end">Event: <code>'end'</code></a></li>
<li><a href="#quic_event_error_2">Event: <code>'error'</code></a></li>
<li><a href="#quic_event_informationalheaders">Event: <code>'informationalHeaders'</code></a></li>
<li><a href="#quic_event_initialheaders">Event: <code>'initialHeaders'</code></a></li>
<li><a href="#quic_event_trailingheaders">Event: <code>'trailingHeaders'</code></a></li>
<li><a href="#quic_event_readable">Event: <code>'readable'</code></a></li>
<li><a href="#quic_quicstream_bidirectional"><code>quicstream.bidirectional</code></a></li>
<li><a href="#quic_quicstream_bytesreceived"><code>quicstream.bytesReceived</code></a></li>
<li><a href="#quic_quicstream_bytessent"><code>quicstream.bytesSent</code></a></li>
<li><a href="#quic_quicstream_clientinitiated"><code>quicstream.clientInitiated</code></a></li>
<li><a href="#quic_quicstream_close"><code>quicstream.close()</code></a></li>
<li><a href="#quic_quicstream_dataackhistogram"><code>quicstream.dataAckHistogram</code></a></li>
<li><a href="#quic_quicstream_dataratehistogram"><code>quicstream.dataRateHistogram</code></a></li>
<li><a href="#quic_quicstream_datasizehistogram"><code>quicstream.dataSizeHistogram</code></a></li>
<li><a href="#quic_quicstream_duration"><code>quicstream.duration</code></a></li>
<li><a href="#quic_quicstream_finalsize"><code>quicstream.finalSize</code></a></li>
<li><a href="#quic_quicstream_id"><code>quicstream.id</code></a></li>
<li><a href="#quic_quicstream_maxacknowledgedoffset"><code>quicstream.maxAcknowledgedOffset</code></a></li>
<li><a href="#quic_quicstream_maxextendedoffset"><code>quicstream.maxExtendedOffset</code></a></li>
<li><a href="#quic_quicstream_maxreceivedoffset"><code>quicstream.maxReceivedOffset</code></a></li>
<li><a href="#quic_quicstream_pushstream_headers_options"><code>quicstream.pushStream(headers[, options])</code></a></li>
<li><a href="#quic_quicstream_serverinitiated"><code>quicstream.serverInitiated</code></a></li>
<li><a href="#quic_quicstream_session"><code>quicstream.session</code></a></li>
<li><a href="#quic_quicstream_sendfd_fd_options"><code>quicstream.sendFD(fd[, options])</code></a></li>
<li><a href="#quic_quicstream_sendfile_path_options"><code>quicstream.sendFile(path[, options])</code></a></li>
<li><a href="#quic_quicstream_submitinformationalheaders_headers"><code>quicstream.submitInformationalHeaders(headers)</code></a></li>
<li><a href="#quic_quicstream_submitinitialheaders_headers"><code>quicstream.submitInitialHeaders(headers)</code></a></li>
<li><a href="#quic_quicstream_submittrailingheaders_headers"><code>quicstream.submitTrailingHeaders(headers)</code></a></li>
<li><a href="#quic_quicstream_unidirectional"><code>quicstream.unidirectional</code></a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#quic_additional_notes">Additional notes</a>
<ul>
<li><a href="#quic_custom_dns_lookup_functions">Custom DNS lookup functions</a></li>
<li><a href="#quic_online_certificate_status_protocol_ocsp">Online Certificate Status Protocol (OCSP)</a>
<ul>
<li><a href="#quic_requests">Requests</a></li>
<li><a href="#quic_responses">Responses</a></li>
</ul>
</li>
<li><a href="#quic_handling_client_hello">Handling client hello</a></li>
</ul>
</li>
</ul>
</li>
</ul>
      </div>

      <div id="apicontent">
        <h1>QUIC<span><a class="mark" href="#quic_quic" id="quic_quic">#</a></span></h1>

<p></p><div class="api_stability api_stability_1"><a href="documentation.html#documentation_stability_index">Stability: 1</a> - Experimental</div><p></p>
<p>The <code>net</code> module provides an implementation of the QUIC protocol. To
access it, the Node.js binary must be compiled using the
<code>--experimental-quic</code> configuration flag.</p>
<pre><code class="language-js"><span class="hljs-keyword">const</span> { createQuicSocket } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'net'</span>);</code></pre>
<h2>Example<span><a class="mark" href="#quic_example" id="quic_example">#</a></span></h2>
<pre><code class="language-js"><span class="hljs-meta">'use strict'</span>;

<span class="hljs-keyword">const</span> key = getTLSKeySomehow();
<span class="hljs-keyword">const</span> cert = getTLSCertSomehow();

<span class="hljs-keyword">const</span> { createQuicSocket } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'net'</span>);

<span class="hljs-comment">// Create the QUIC UDP IPv4 socket bound to local IP port 1234</span>
<span class="hljs-keyword">const</span> socket = createQuicSocket({ <span class="hljs-attr">endpoint</span>: { <span class="hljs-attr">port</span>: <span class="hljs-number">1234</span> } });

socket.on(<span class="hljs-string">'session'</span>, <span class="hljs-keyword">async</span> (session) => {
  <span class="hljs-comment">// A new server side session has been created!</span>

  <span class="hljs-comment">// The peer opened a new stream!</span>
  session.on(<span class="hljs-string">'stream'</span>, <span class="hljs-function">(<span class="hljs-params">stream</span>) =></span> {
    <span class="hljs-comment">// Let's say hello</span>
    stream.end(<span class="hljs-string">'Hello World'</span>);

    <span class="hljs-comment">// Let's see what the peer has to say...</span>
    stream.setEncoding(<span class="hljs-string">'utf8'</span>);
    stream.on(<span class="hljs-string">'data'</span>, <span class="hljs-built_in">console</span>.log);
    stream.on(<span class="hljs-string">'end'</span>, <span class="hljs-function">() =></span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'stream ended'</span>));
  });

  <span class="hljs-keyword">const</span> uni = <span class="hljs-keyword">await</span> session.openStream({ <span class="hljs-attr">halfOpen</span>: <span class="hljs-literal">true</span> });
  uni.write(<span class="hljs-string">'hi '</span>);
  uni.end(<span class="hljs-string">'from the server!'</span>);
});

<span class="hljs-comment">// Tell the socket to operate as a server using the given</span>
<span class="hljs-comment">// key and certificate to secure new connections, using</span>
<span class="hljs-comment">// the fictional 'hello' application protocol.</span>
(<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">await</span> socket.listen({ key, cert, <span class="hljs-attr">alpn</span>: <span class="hljs-string">'hello'</span> });
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'The socket is listening for sessions!'</span>);
})();
</code></pre>
<h2>QUIC basics<span><a class="mark" href="#quic_quic_basics" id="quic_quic_basics">#</a></span></h2>
<p>QUIC is a UDP-based network transport protocol that includes built-in security
via TLS 1.3, flow control, error correction, connection migration,
multiplexing, and more.</p>
<p>Within the Node.js implementation of the QUIC protocol, there are three main
components: the <code>QuicSocket</code>, the <code>QuicSession</code> and the <code>QuicStream</code>.</p>
<h3>QuicSocket<span><a class="mark" href="#quic_quicsocket" id="quic_quicsocket">#</a></span></h3>
<p>A <code>QuicSocket</code> encapsulates a binding to one or more local UDP ports. It is
used to send data to, and receive data from, remote endpoints. Once created,
a <code>QuicSocket</code> is associated with a local network address and IP port and can
act as both a QUIC client and server simultaneously. User code at the
JavaScript level interacts with the <code>QuicSocket</code> object to:</p>
<ul>
<li>Query or modified the properties of the local UDP binding;</li>
<li>Create client <code>QuicSession</code> instances;</li>
<li>Wait for server <code>QuicSession</code> instances; or</li>
<li>Query activity statistics</li>
</ul>
<p>Unlike the <code>net.Socket</code> and <code>tls.TLSSocket</code>, a <code>QuicSocket</code> instance cannot be
directly used by user code at the JavaScript level to send or receive data over
the network.</p>
<h3>Client and server QuicSessions<span><a class="mark" href="#quic_client_and_server_quicsessions" id="quic_client_and_server_quicsessions">#</a></span></h3>
<p>A <code>QuicSession</code> represents a logical connection between two QUIC endpoints (a
client and a server). In the JavaScript API, each is represented by the
<code>QuicClientSession</code> and <code>QuicServerSession</code> specializations.</p>
<p>At any given time, a <code>QuicSession</code> exists is one of four possible states:</p>
<ul>
<li><code>Initial</code> - Entered as soon as the <code>QuicSession</code> is created.</li>
<li><code>Handshake</code> - Entered as soon as the TLS 1.3 handshake between the client and
server begins. The handshake is always initiated by the client.</li>
<li><code>Ready</code> - Entered as soon as the TLS 1.3 handshake completes. Once the
<code>QuicSession</code> enters the <code>Ready</code> state, it may be used to exchange
application data using <code>QuicStream</code> instances.</li>
<li><code>Closed</code> - Entered as soon as the <code>QuicSession</code> connection has been
terminated.</li>
</ul>
<p>New instances of <code>QuicClientSession</code> are created using the <code>connect()</code>
function on a <code>QuicSocket</code> as in the example below:</p>
<pre><code class="language-js"><span class="hljs-keyword">const</span> { createQuicSocket } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'net'</span>);

<span class="hljs-comment">// Create a QuicSocket associated with localhost and port 1234</span>
<span class="hljs-keyword">const</span> socket = createQuicSocket({ <span class="hljs-attr">endpoint</span>: { <span class="hljs-attr">port</span>: <span class="hljs-number">1234</span> } });

(<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">const</span> client = <span class="hljs-keyword">await</span> socket.connect({
    <span class="hljs-attr">address</span>: <span class="hljs-string">'example.com'</span>,
    <span class="hljs-attr">port</span>: <span class="hljs-number">4567</span>,
    <span class="hljs-attr">alpn</span>: <span class="hljs-string">'foo'</span>
  });
})();</code></pre>
<p>As soon as the <code>QuicClientSession</code> is created, the <code>address</code> provided in
the connect options will be resolved to an IP address (if necessary), and
the TLS 1.3 handshake will begin. The <code>QuicClientSession</code> cannot be used
to exchange application data until after the <code>'secure'</code> event has been
emitted by the <code>QuicClientSession</code> object, signaling the completion of
the TLS 1.3 handshake.</p>
<pre><code class="language-js">client.on(<span class="hljs-string">'secure'</span>, <span class="hljs-function">() =></span> {
  <span class="hljs-comment">// The QuicClientSession can now be used for application data</span>
});</code></pre>
<p>New instances of <code>QuicServerSession</code> are created internally by the
<code>QuicSocket</code> if it has been configured to listen for new connections
using the <code>listen()</code> method.</p>
<pre><code class="language-js"><span class="hljs-keyword">const</span> { createQuicSocket } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'net'</span>);

<span class="hljs-keyword">const</span> key = getTLSKeySomehow();
<span class="hljs-keyword">const</span> cert = getTLSCertSomehow();

<span class="hljs-keyword">const</span> socket = createQuicSocket();

socket.on(<span class="hljs-string">'session'</span>, <span class="hljs-function">(<span class="hljs-params">session</span>) =></span> {
  session.on(<span class="hljs-string">'secure'</span>, <span class="hljs-function">() =></span> {
    <span class="hljs-comment">// The QuicServerSession can now be used for application data</span>
  });
});

(<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">await</span> socket.listen({ key, cert, <span class="hljs-attr">alpn</span>: <span class="hljs-string">'foo'</span> });
})();</code></pre>
<p>As with client <code>QuicSession</code> instances, the <code>QuicServerSession</code> cannot be
used to exchange application data until the <code>'secure'</code> event has been emitted.</p>
<h3>QuicSession and ALPN<span><a class="mark" href="#quic_quicsession_and_alpn" id="quic_quicsession_and_alpn">#</a></span></h3>
<p>QUIC uses the TLS 1.3 <a href="https://tools.ietf.org/html/rfc7301">ALPN</a> ("Application-Layer Protocol Negotiation")
extension to identify the application level protocol that is using the QUIC
connection. Every <code>QuicSession</code> instance has an ALPN identifier that <em>must</em> be
specified in either the <code>connect()</code> or <code>listen()</code> options. ALPN identifiers that
are known to Node.js (such as the ALPN identifier for HTTP/3) will alter how the
<code>QuicSession</code> and <code>QuicStream</code> objects operate internally, but the QUIC
implementation for Node.js has been designed to allow any ALPN to be specified
and used.</p>
<h3>QuicStream<span><a class="mark" href="#quic_quicstream" id="quic_quicstream">#</a></span></h3>
<p>Once a <code>QuicSession</code> transitions to the <code>Ready</code> state, <code>QuicStream</code> instances
may be created and used to exchange application data. On a general level, all
<code>QuicStream</code> instances are simply Node.js Duplex Streams that allow
bidirectional data flow between the QUIC client and server. However, the
application protocol negotiated for the <code>QuicSession</code> may alter the semantics
and operation of a <code>QuicStream</code> associated with the session. Specifically,
some features of the <code>QuicStream</code> (e.g. headers) are enabled only if the
application protocol selected is known by Node.js to support those features.</p>
<p>Once the <code>QuicSession</code> is ready, a <code>QuicStream</code> may be created by either the
client or server, and may be unidirectional or bidirectional.</p>
<p>The <code>openStream()</code> method is used to create a new <code>QuicStream</code>:</p>
<pre><code class="language-js"><span class="hljs-comment">// Create a new bidirectional stream</span>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createStreams</span>(<span class="hljs-params">session</span>) </span>{
  <span class="hljs-keyword">const</span> stream1 = <span class="hljs-keyword">await</span> session.openStream();

  <span class="hljs-comment">// Create a new unidirectional stream</span>
  <span class="hljs-keyword">const</span> stream2 = <span class="hljs-keyword">await</span> session.openStream({ <span class="hljs-attr">halfOpen</span>: <span class="hljs-literal">true</span> });
}</code></pre>
<p>As suggested by the names, a bidirectional stream allows data to be sent on
a stream in both directions, by both client and server, regardless of which
peer opened the stream. A unidirectional stream can be written to only by the
QuicSession that opened it.</p>
<p>The <code>'stream'</code> event is emitted by the <code>QuicSession</code> when a new <code>QuicStream</code>
has been initiated by the connected peer:</p>
<pre><code class="language-js">session.on(<span class="hljs-string">'stream'</span>, <span class="hljs-function">(<span class="hljs-params">stream</span>) =></span> {
  <span class="hljs-keyword">if</span> (stream.bidirectional) {
    stream.write(<span class="hljs-string">'Hello World'</span>);
    stream.end();
  }
  stream.on(<span class="hljs-string">'data'</span>, <span class="hljs-built_in">console</span>.log);
  stream.on(<span class="hljs-string">'end'</span>, <span class="hljs-function">() =></span> {});
});</code></pre>
<h4>QuicStream headers<span><a class="mark" href="#quic_quicstream_headers" id="quic_quicstream_headers">#</a></span></h4>
<p>Some QUIC application protocols (like HTTP/3) use headers.</p>
<p>There are four kinds of headers that the Node.js QUIC implementation
is capable of handling dependent entirely on known application protocol
support:</p>
<ul>
<li>Informational Headers</li>
<li>Initial Headers</li>
<li>Trailing Headers</li>
<li>Push Headers</li>
</ul>
<p>These categories correlate exactly with the equivalent HTTP
concepts:</p>
<ul>
<li>Informational Headers: Any response headers transmitted within
a block of headers using a <code>1xx</code> status code.</li>
<li>Initial Headers: HTTP request or response headers</li>
<li>Trailing Headers: A block of headers that follow the body of a
request or response.</li>
<li>Push Promise Headers: A block of headers included in a promised
push stream.</li>
</ul>
<p>If headers are supported by the application protocol in use for
a given <code>QuicSession</code>, the <code>'initialHeaders'</code>, <code>'informationalHeaders'</code>,
and <code>'trailingHeaders'</code> events will be emitted by the <code>QuicStream</code>
object when headers are received; and the <code>submitInformationalHeaders()</code>,
<code>submitInitialHeaders()</code>, and <code>submitTrailingHeaders()</code> methods can be
used to send headers.</p>
<h2>QUIC and HTTP/3<span><a class="mark" href="#quic_quic_and_http_3" id="quic_quic_and_http_3">#</a></span></h2>
<p>HTTP/3 is an application layer protocol that uses QUIC as the transport.</p>
<p>TBD</p>
<h2>QUIC JavaScript API<span><a class="mark" href="#quic_quic_javascript_api" id="quic_quic_javascript_api">#</a></span></h2>
<h3><code>net.createQuicSocket([options])</code><span><a class="mark" href="#quic_net_createquicsocket_options" id="quic_net_createquicsocket_options">#</a></span></h3>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="type">&#x3C;Object></a>
<ul>
<li><code>client</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="type">&#x3C;Object></a> A default configuration for QUIC client sessions created
using <code>quicsocket.connect()</code>.</li>
<li><code>disableStatelessReset</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&#x3C;boolean></a> When <code>true</code> the <code>QuicSocket</code> will not
send stateless resets. <strong>Default</strong>: <code>false</code>.</li>
<li><code>endpoint</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="type">&#x3C;Object></a> An object describing the local address to bind to.
<ul>
<li><code>address</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a> The local address to bind to. This may be an IPv4 or
IPv6 address or a host name. If a host name is given, it will be resolved
to an IP address.</li>
<li><code>port</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a> The local port to bind to.</li>
<li><code>type</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a> Can be one of <code>'udp4'</code>, <code>'upd6'</code>, or <code>'udp6-only'</code> to
use IPv4, IPv6, or IPv6 with dual-stack mode disabled.
<strong>Default</strong>: <code>'udp4'</code>.</li>
</ul>
</li>
<li><code>lookup</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" class="type">&#x3C;Function></a> A <a href="#quic_custom_dns_lookup_functions">custom DNS lookup function</a>.
<strong>Default</strong>: undefined.</li>
<li><code>maxConnections</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a> The maximum number of total active inbound
connections.</li>
<li><code>maxConnectionsPerHost</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a> The maximum number of inbound connections
allowed per remote host. Default: <code>100</code>.</li>
<li><code>maxStatelessResetsPerHost</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a> The maximum number of stateless
resets that the <code>QuicSocket</code> is permitted to send per remote host.
Default: <code>10</code>.</li>
<li><code>qlog</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&#x3C;boolean></a> Whether to enable <a href="#quic_quicsession_qlog">'qlog'</a> for incoming sessions.
(For outgoing client sessions, set <code>client.qlog</code>.) Default: <code>false</code>.</li>
<li><code>retryTokenTimeout</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a> The maximum number of <em>seconds</em> for retry token
validation. Default: <code>10</code> seconds.</li>
<li><code>server</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="type">&#x3C;Object></a> A default configuration for QUIC server sessions.</li>
<li><code>statelessResetSecret</code> <a href="buffer.html#buffer_class_buffer" class="type">&#x3C;Buffer></a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array" class="type">&#x3C;Uint8Array></a> A 16-byte <code>Buffer</code> or
<code>Uint8Array</code> providing the secret to use when generating stateless reset
tokens. If not specified, a random secret will be generated for the
<code>QuicSocket</code>. <strong>Default</strong>: <code>undefined</code>.</li>
<li><code>validateAddress</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&#x3C;boolean></a> When <code>true</code>, the <code>QuicSocket</code> will use explicit
address validation using a QUIC <code>RETRY</code> frame when listening for new server
sessions. Default: <code>false</code>.</li>
</ul>
</li>
</ul>
<p>The <code>net.createQuicSocket()</code> function is used to create new <code>QuicSocket</code>
instances associated with a local UDP address.</p>
<h3>Class: <code>QuicEndpoint</code><span><a class="mark" href="#quic_class_quicendpoint" id="quic_class_quicendpoint">#</a></span></h3>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<p>The <code>QuicEndpoint</code> wraps a local UDP binding used by a <code>QuicSocket</code> to send
and receive data. A single <code>QuicSocket</code> may be bound to multiple
<code>QuicEndpoint</code> instances at any given time.</p>
<p>Users will not create instances of <code>QuicEndpoint</code> directly.</p>
<h4><code>quicendpoint.addMembership(address, iface)</code><span><a class="mark" href="#quic_quicendpoint_addmembership_address_iface" id="quic_quicendpoint_addmembership_address_iface">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li><code>address</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a></li>
<li><code>iface</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a></li>
</ul>
<p>Tells the kernel to join a multicast group at the given <code>multicastAddress</code> and
<code>multicastInterface</code> using the <code>IP_ADD_MEMBERSHIP</code> socket option. If the
<code>multicastInterface</code> argument is not specified, the operating system will
choose one interface and will add membership to it. To add membership to every
available interface, call <code>addMembership()</code> multiple times, once per
interface.</p>
<h4><code>quicendpoint.address</code><span><a class="mark" href="#quic_quicendpoint_address" id="quic_quicendpoint_address">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: Address</li>
</ul>
<p>An object containing the address information for a bound <code>QuicEndpoint</code>.</p>
<p>The object will contain the properties:</p>
<ul>
<li><code>address</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a> The local IPv4 or IPv6 address to which the <code>QuicEndpoint</code> is
bound.</li>
<li><code>family</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a> Either <code>'IPv4'</code> or <code>'IPv6'</code>.</li>
<li><code>port</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a> The local IP port to which the <code>QuicEndpoint</code> is bound.</li>
</ul>
<p>If the <code>QuicEndpoint</code> is not bound, <code>quicendpoint.address</code> is an empty object.</p>
<h4><code>quicendpoint.bind([options])</code><span><a class="mark" href="#quic_quicendpoint_bind_options" id="quic_quicendpoint_bind_options">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<p>Binds the <code>QuicEndpoint</code> if it has not already been bound. User code will
not typically be responsible for binding a <code>QuicEndpoint</code> as the owning
<code>QuicSocket</code> will do that automatically.</p>
<ul>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="type">&#x3C;Object></a>
<ul>
<li><code>signal</code> <a href="globals.html#globals_class_abortsignal" class="type">&#x3C;AbortSignal></a> Optionally allows the <code>bind()</code> to be canceled
using an <code>AbortController</code>.</li>
</ul>
</li>
<li>Returns: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" class="type">&#x3C;Promise></a></li>
</ul>
<p>The <code>quicendpoint.bind()</code> function returns <code>Promise</code> that will be resolved
with the address once the bind operation is successful.</p>
<p>If the <code>QuicEndpoint</code> has been destroyed, or is destroyed while the <code>Promise</code>
is pending, the <code>Promise</code> will be rejected with an <code>ERR_INVALID_STATE</code> error.</p>
<p>If an <code>AbortSignal</code> is specified in the <code>options</code> and it is triggered while
the <code>Promise</code> is pending, the <code>Promise</code> will be rejected with an <code>AbortError</code>.</p>
<p>If <code>quicendpoint.bind()</code> is called again while a previously returned <code>Promise</code>
is still pending or has already successfully resolved, the previously returned
pending <code>Promise</code> will be returned. If the additional call to
<code>quicendpoint.bind()</code> contains an <code>AbortSignal</code>, the <code>signal</code> will be ignored.</p>
<h4><code>quicendpoint.bound</code><span><a class="mark" href="#quic_quicendpoint_bound" id="quic_quicendpoint_bound">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&#x3C;boolean></a></li>
</ul>
<p>Set to <code>true</code> if the <code>QuicEndpoint</code> is bound to the local UDP port.</p>
<h4><code>quicendpoint.close()</code><span><a class="mark" href="#quic_quicendpoint_close" id="quic_quicendpoint_close">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<p>Closes and destroys the <code>QuicEndpoint</code>. Returns a <code>Promise</code> that is resolved
once the <code>QuicEndpoint</code> has been destroyed, or rejects if the <code>QuicEndpoint</code>
is destroyed with an error.</p>
<ul>
<li>Returns: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" class="type">&#x3C;Promise></a></li>
</ul>
<p>The <code>Promise</code> cannot be canceled. Once <code>quicendpoint.close()</code> is called, the
<code>QuicEndpoint</code> will be destroyed.</p>
<h4><code>quicendpoint.closing</code><span><a class="mark" href="#quic_quicendpoint_closing" id="quic_quicendpoint_closing">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&#x3C;boolean></a></li>
</ul>
<p>Set to <code>true</code> if the <code>QuicEndpoint</code> is in the process of closing.</p>
<h4><code>quicendpoint.destroy([error])</code><span><a class="mark" href="#quic_quicendpoint_destroy_error" id="quic_quicendpoint_destroy_error">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li><code>error</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="type">&#x3C;Object></a> An <code>Error</code> object.</li>
</ul>
<p>Closes and destroys the <code>QuicEndpoint</code> instance making it unusable.</p>
<h4><code>quicendpoint.destroyed</code><span><a class="mark" href="#quic_quicendpoint_destroyed" id="quic_quicendpoint_destroyed">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&#x3C;boolean></a></li>
</ul>
<p>Set to <code>true</code> if the <code>QuicEndpoint</code> has been destroyed.</p>
<h4><code>quicendpoint.dropMembership(address, iface)</code><span><a class="mark" href="#quic_quicendpoint_dropmembership_address_iface" id="quic_quicendpoint_dropmembership_address_iface">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li><code>address</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a></li>
<li><code>iface</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a></li>
</ul>
<p>Instructs the kernel to leave a multicast group at <code>multicastAddress</code> using the
<code>IP_DROP_MEMBERSHIP</code> socket option. This method is automatically called by the
kernel when the socket is closed or the process terminates, so most apps will
never have reason to call this.</p>
<p>If <code>multicastInterface</code> is not specified, the operating system will attempt to
drop membership on all valid interfaces.</p>
<h4><code>quicendpoint.fd</code><span><a class="mark" href="#quic_quicendpoint_fd" id="quic_quicendpoint_fd">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;integer></a></li>
</ul>
<p>The system file descriptor the <code>QuicEndpoint</code> is bound to. This property
is not set on Windows.</p>
<h4><code>quicendpoint.pending</code><span><a class="mark" href="#quic_quicendpoint_pending" id="quic_quicendpoint_pending">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&#x3C;boolean></a></li>
</ul>
<p>Set to <code>true</code> if the <code>QuicEndpoint</code> is in the process of binding to
the local UDP port.</p>
<h4><code>quicendpoint.ref()</code><span><a class="mark" href="#quic_quicendpoint_ref" id="quic_quicendpoint_ref">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<h4><code>quicendpoint.setBroadcast([on])</code><span><a class="mark" href="#quic_quicendpoint_setbroadcast_on" id="quic_quicendpoint_setbroadcast_on">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li><code>on</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&#x3C;boolean></a></li>
</ul>
<p>Sets or clears the <code>SO_BROADCAST</code> socket option. When set to <code>true</code>, UDP
packets may be sent to a local interface's broadcast address.</p>
<h4><code>quicendpoint.setMulticastInterface(iface)</code><span><a class="mark" href="#quic_quicendpoint_setmulticastinterface_iface" id="quic_quicendpoint_setmulticastinterface_iface">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li><code>iface</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a></li>
</ul>
<p>All references to scope in this section are referring to IPv6 Zone Indices,
which are defined by <a href="https://tools.ietf.org/html/rfc4007">RFC 4007</a>. In string form, an IP with a scope index
is written as <code>'IP%scope'</code> where scope is an interface name or interface
number.</p>
<p>Sets the default outgoing multicast interface of the socket to a chosen
interface or back to system interface selection. The multicastInterface must
be a valid string representation of an IP from the socket's family.</p>
<p>For IPv4 sockets, this should be the IP configured for the desired physical
interface. All packets sent to multicast on the socket will be sent on the
interface determined by the most recent successful use of this call.</p>
<p>For IPv6 sockets, multicastInterface should include a scope to indicate the
interface as in the examples that follow. In IPv6, individual send calls can
also use explicit scope in addresses, so only packets sent to a multicast
address without specifying an explicit scope are affected by the most recent
successful use of this call.</p>
<h5>Examples: IPv6 outgoing multicast interface<span><a class="mark" href="#quic_examples_ipv6_outgoing_multicast_interface" id="quic_examples_ipv6_outgoing_multicast_interface">#</a></span></h5>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<p>On most systems, where scope format uses the interface name:</p>
<pre><code class="language-js"><span class="hljs-keyword">const</span> { createQuicSocket } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'net'</span>);
<span class="hljs-keyword">const</span> socket = createQuicSocket({ <span class="hljs-attr">endpoint</span>: { <span class="hljs-attr">type</span>: <span class="hljs-string">'udp6'</span>, <span class="hljs-attr">port</span>: <span class="hljs-number">1234</span> } });

socket.on(<span class="hljs-string">'ready'</span>, <span class="hljs-function">() =></span> {
  socket.endpoints[<span class="hljs-number">0</span>].setMulticastInterface(<span class="hljs-string">'::%eth1'</span>);
});</code></pre>
<p>On Windows, where scope format uses an interface number:</p>
<pre><code class="language-js"><span class="hljs-keyword">const</span> { createQuicSocket } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'net'</span>);
<span class="hljs-keyword">const</span> socket = createQuicSocket({ <span class="hljs-attr">endpoint</span>: { <span class="hljs-attr">type</span>: <span class="hljs-string">'udp6'</span>, <span class="hljs-attr">port</span>: <span class="hljs-number">1234</span> } });

socket.on(<span class="hljs-string">'ready'</span>, <span class="hljs-function">() =></span> {
  socket.endpoints[<span class="hljs-number">0</span>].setMulticastInterface(<span class="hljs-string">'::%2'</span>);
});</code></pre>
<h5>Example: IPv4 outgoing multicast interface<span><a class="mark" href="#quic_example_ipv4_outgoing_multicast_interface" id="quic_example_ipv4_outgoing_multicast_interface">#</a></span></h5>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<p>All systems use an IP of the host on the desired physical interface:</p>
<pre><code class="language-js"><span class="hljs-keyword">const</span> { createQuicSocket } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'net'</span>);
<span class="hljs-keyword">const</span> socket = createQuicSocket({ <span class="hljs-attr">endpoint</span>: { <span class="hljs-attr">type</span>: <span class="hljs-string">'udp4'</span>, <span class="hljs-attr">port</span>: <span class="hljs-number">1234</span> } });

socket.on(<span class="hljs-string">'ready'</span>, <span class="hljs-function">() =></span> {
  socket.endpoints[<span class="hljs-number">0</span>].setMulticastInterface(<span class="hljs-string">'10.0.0.2'</span>);
});</code></pre>
<h5>Call results<span><a class="mark" href="#quic_call_results" id="quic_call_results">#</a></span></h5>
<p>A call on a socket that is not ready to send or no longer open may throw a
Not running Error.</p>
<p>If multicastInterface can not be parsed into an IP then an <code>EINVAL</code> System
Error is thrown.</p>
<p>On IPv4, if <code>multicastInterface</code> is a valid address but does not match any
interface, or if the address does not match the family then a System Error
such as <code>EADDRNOTAVAIL</code> or <code>EPROTONOSUP</code> is thrown.</p>
<p>On IPv6, most errors with specifying or omitting scope will result in the
socket continuing to use (or returning to) the system's default interface
selection.</p>
<p>A socket's address family's ANY address (IPv4 <code>'0.0.0.0'</code> or IPv6 <code>'::'</code>)
can be used to return control of the sockets default outgoing interface to
the system for future multicast packets.</p>
<h4><code>quicendpoint.setMulticastLoopback([on])</code><span><a class="mark" href="#quic_quicendpoint_setmulticastloopback_on" id="quic_quicendpoint_setmulticastloopback_on">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li><code>on</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&#x3C;boolean></a></li>
</ul>
<p>Sets or clears the <code>IP_MULTICAST_LOOP</code> socket option. When set to <code>true</code>,
multicast packets will also be received on the local interface.</p>
<h4><code>quicendpoint.setMulticastTTL(ttl)</code><span><a class="mark" href="#quic_quicendpoint_setmulticastttl_ttl" id="quic_quicendpoint_setmulticastttl_ttl">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li><code>ttl</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a></li>
</ul>
<p>Sets the <code>IP_MULTICAST_TTL</code> socket option. While TTL generally stands for
"Time to Live", in this context it specifies the number of IP hops that a
packet is allowed to travel through, specifically for multicast traffic. Each
router or gateway that forwards a packet decrements the TTL. If the TTL is
decremented to <code>0</code> by a router, it will not be forwarded.</p>
<p>The argument passed to <code>setMulticastTTL()</code> is a number of hops between
<code>0</code> and <code>255</code>. The default on most systems is <code>1</code> but can vary.</p>
<h4><code>quicendpoint.setTTL(ttl)</code><span><a class="mark" href="#quic_quicendpoint_setttl_ttl" id="quic_quicendpoint_setttl_ttl">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li><code>ttl</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a></li>
</ul>
<p>Sets the <code>IP_TTL</code> socket option. While TTL generally stands for "Time to Live",
in this context it specifies the number of IP hops that a packet is allowed to
travel through. Each router or gateway that forwards a packet decrements the
TTL. If the TTL is decremented to <code>0</code> by a router, it will not be forwarded.
Changing TTL values is typically done for network probes or when multicasting.</p>
<p>The argument to <code>setTTL()</code> is a number of hops between <code>1</code> and <code>255</code>.
The default on most systems is <code>64</code> but can vary.</p>
<h4><code>quicendpoint.unref()</code><span><a class="mark" href="#quic_quicendpoint_unref" id="quic_quicendpoint_unref">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<h3>Class: <code>QuicSession extends EventEmitter</code><span><a class="mark" href="#quic_class_quicsession_extends_eventemitter" id="quic_class_quicsession_extends_eventemitter">#</a></span></h3>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Extends: <a href="events.html#events_class_eventemitter" class="type">&#x3C;EventEmitter></a></li>
</ul>
<p>The <code>QuicSession</code> is an abstract base class that defines events, methods, and
properties that are shared by both <code>QuicClientSession</code> and <code>QuicServerSession</code>.</p>
<p>Users will not create instances of <code>QuicSession</code> directly.</p>
<h4>Event: <code>'close'</code><span><a class="mark" href="#quic_event_close" id="quic_event_close">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<p>Emitted after the <code>QuicSession</code> has been destroyed and is no longer usable.</p>
<p>The <code>'close'</code> event will not be emitted more than once.</p>
<h4>Event: <code>'error'</code><span><a class="mark" href="#quic_event_error" id="quic_event_error">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<p>Emitted immediately before the <code>'close'</code> event if the <code>QuicSession</code> was
destroyed with an error.</p>
<p>The callback will be invoked with a single argument:</p>
<ul>
<li><code>error</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="type">&#x3C;Object></a> An <code>Error</code> object.</li>
</ul>
<p>The <code>'error'</code> event will not be emitted more than once.</p>
<h4>Event: <code>'keylog'</code><span><a class="mark" href="#quic_event_keylog" id="quic_event_keylog">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<p>Emitted when key material is generated or received by a <code>QuicSession</code>
(typically during or immediately following the handshake process). This keying
material can be stored for debugging, as it allows captured TLS traffic to be
decrypted. It may be emitted multiple times per <code>QuicSession</code> instance.</p>
<p>The callback will be invoked with a single argument:</p>
<ul>
<li><code>line</code> <a href="buffer.html#buffer_class_buffer" class="type">&#x3C;Buffer></a> Line of ASCII text, in NSS SSLKEYLOGFILE format.</li>
</ul>
<p>A typical use case is to append received lines to a common text file, which is
later used by software (such as Wireshark) to decrypt the traffic:</p>
<pre><code class="language-js"><span class="hljs-keyword">const</span> log = fs.createWriteStream(<span class="hljs-string">'/tmp/ssl-keys.log'</span>, { <span class="hljs-attr">flags</span>: <span class="hljs-string">'a'</span> });
<span class="hljs-comment">// ...</span>
session.on(<span class="hljs-string">'keylog'</span>, <span class="hljs-function">(<span class="hljs-params">line</span>) =></span> log.write(line));</code></pre>
<p>The <code>'keylog'</code> event will be emitted multiple times.</p>
<h4>Event: <code>'pathValidation'</code><span><a class="mark" href="#quic_event_pathvalidation" id="quic_event_pathvalidation">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<p>Emitted when a path validation result has been determined. This event
is strictly informational. When path validation is successful, the
<code>QuicSession</code> will automatically update to use the new validated path.</p>
<p>The callback will be invoked with three arguments:</p>
<ul>
<li><code>result</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a> Either <code>'failure'</code> or <code>'success'</code>, denoting the status
of the path challenge.</li>
<li><code>local</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="type">&#x3C;Object></a> The local address component of the tested path.</li>
<li><code>remote</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="type">&#x3C;Object></a> The remote address component of the tested path.</li>
</ul>
<p>The <code>'pathValidation'</code> event will be emitted multiple times.</p>
<h4>Event: <code>'secure'</code><span><a class="mark" href="#quic_event_secure" id="quic_event_secure">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<p>Emitted after the TLS handshake has been completed.</p>
<p>The callback will be invoked with two arguments:</p>
<ul>
<li><code>servername</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a> The SNI servername requested by the client.</li>
<li><code>alpnProtocol</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a> The negotiated ALPN protocol.</li>
<li><code>cipher</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="type">&#x3C;Object></a> Information about the selected cipher algorithm.
<ul>
<li><code>name</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a> The cipher algorithm name.</li>
<li><code>version</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a> The TLS version (currently always <code>'TLSv1.3'</code>).</li>
</ul>
</li>
</ul>
<p>These will also be available using the <code>quicsession.servername</code>,
<code>quicsession.alpnProtocol</code>, and <code>quicsession.cipher</code> properties.</p>
<p>The <code>'secure'</code> event will not be emitted more than once.</p>
<h4>Event: <code>'stream'</code><span><a class="mark" href="#quic_event_stream" id="quic_event_stream">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<p>Emitted when a new <code>QuicStream</code> has been initiated by the connected peer.</p>
<p>The <code>'stream'</code> event may be emitted multiple times.</p>
<h4><code>quicsession.ackDelayRetransmitCount</code><span><a class="mark" href="#quic_quicsession_ackdelayretransmitcount" id="quic_quicsession_ackdelayretransmitcount">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a></li>
</ul>
<p>The number of retransmissions caused by delayed acknowledgments.</p>
<h4><code>quicsession.address</code><span><a class="mark" href="#quic_quicsession_address" id="quic_quicsession_address">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="type">&#x3C;Object></a>
<ul>
<li><code>address</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a> The local IPv4 or IPv6 address to which the <code>QuicSession</code>
is bound.</li>
<li><code>family</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a> Either <code>'IPv4'</code> or <code>'IPv6'</code>.</li>
<li><code>port</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a> The local IP port to which the <code>QuicSocket</code> is bound.</li>
</ul>
</li>
</ul>
<p>An object containing the local address information for the <code>QuicSocket</code> to which
the <code>QuicSession</code> is currently associated.</p>
<h4><code>quicsession.alpnProtocol</code><span><a class="mark" href="#quic_quicsession_alpnprotocol" id="quic_quicsession_alpnprotocol">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a></li>
</ul>
<p>The ALPN protocol identifier negotiated for this session.</p>
<h4><code>quicsession.authenticated</code><span><a class="mark" href="#quic_quicsession_authenticated" id="quic_quicsession_authenticated">#</a></span></h4>
<!--YAML
added: v15.0.0
-->
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&#x3C;boolean></a></li>
</ul>
<p>True if the certificate provided by the peer during the TLS 1.3
handshake has been verified.</p>
<h4><code>quicsession.authenticationError</code><span><a class="mark" href="#quic_quicsession_authenticationerror" id="quic_quicsession_authenticationerror">#</a></span></h4>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="type">&#x3C;Object></a> An error object</li>
</ul>
<p>If <code>quicsession.authenticated</code> is false, returns an <code>Error</code> object
representing the reason the peer certificate verification failed.</p>
<h4><code>quicsession.bidiStreamCount</code><span><a class="mark" href="#quic_quicsession_bidistreamcount" id="quic_quicsession_bidistreamcount">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a></li>
</ul>
<p>The total number of bidirectional streams created for this <code>QuicSession</code>.</p>
<h4><code>quicsession.blockCount</code><span><a class="mark" href="#quic_quicsession_blockcount" id="quic_quicsession_blockcount">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a></li>
</ul>
<p>The total number of times the <code>QuicSession</code> has been blocked from sending
stream data due to flow control.</p>
<p>Such blocks indicate that transmitted stream data is not being consumed
quickly enough by the connected peer.</p>
<h4><code>quicsession.bytesInFlight</code><span><a class="mark" href="#quic_quicsession_bytesinflight" id="quic_quicsession_bytesinflight">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a></li>
</ul>
<p>The total number of unacknowledged bytes this QUIC endpoint has transmitted
to the connected peer.</p>
<h4><code>quicsession.bytesReceived</code><span><a class="mark" href="#quic_quicsession_bytesreceived" id="quic_quicsession_bytesreceived">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a></li>
</ul>
<p>The total number of bytes received from the peer.</p>
<h4><code>quicsession.bytesSent</code><span><a class="mark" href="#quic_quicsession_bytessent" id="quic_quicsession_bytessent">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a></li>
</ul>
<p>The total number of bytes sent to the peer.</p>
<h4><code>quicsession.cipher</code><span><a class="mark" href="#quic_quicsession_cipher" id="quic_quicsession_cipher">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="type">&#x3C;Object></a>
<ul>
<li><code>name</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a> The cipher algorithm name.</li>
<li><code>type</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a> The TLS version (currently always <code>'TLSv1.3'</code>).</li>
</ul>
</li>
</ul>
<p>Information about the cipher algorithm selected for the session.</p>
<h4><code>quicsession.close()</code><span><a class="mark" href="#quic_quicsession_close" id="quic_quicsession_close">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<p>Begins a graceful close of the <code>QuicSession</code>. Existing <code>QuicStream</code> instances
will be permitted to close naturally. New <code>QuicStream</code> instances will not be
permitted. Once all <code>QuicStream</code> instances have closed, the <code>QuicSession</code>
instance will be destroyed. Returns a <code>Promise</code> that is resolved once the
<code>QuicSession</code> instance is destroyed.</p>
<h4><code>quicsession.closeCode</code><span><a class="mark" href="#quic_quicsession_closecode" id="quic_quicsession_closecode">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="type">&#x3C;Object></a>
<ul>
<li><code>code</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a> The error code reported when the <code>QuicSession</code> closed.</li>
<li><code>family</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a> The type of error code reported (<code>0</code> indicates a QUIC
protocol level error, <code>1</code> indicates a TLS error, <code>2</code> represents an
application level error.)</li>
</ul>
</li>
</ul>
<h4><code>quicsession.closing</code><span><a class="mark" href="#quic_quicsession_closing" id="quic_quicsession_closing">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&#x3C;boolean></a></li>
</ul>
<p>Set to <code>true</code> if the <code>QuicSession</code> is in the process of a graceful shutdown.</p>
<h4><code>quicsession.destroy([error])</code><span><a class="mark" href="#quic_quicsession_destroy_error" id="quic_quicsession_destroy_error">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li><code>error</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Data_types" class="type">&#x3C;any></a></li>
</ul>
<p>Destroys the <code>QuicSession</code> immediately causing the <code>close</code> event to be emitted.
If <code>error</code> is not <code>undefined</code>, the <code>error</code> event will be emitted immediately
before the <code>close</code> event.</p>
<p>Any <code>QuicStream</code> instances that are still opened will be abruptly closed.</p>
<h4><code>quicsession.destroyed</code><span><a class="mark" href="#quic_quicsession_destroyed" id="quic_quicsession_destroyed">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&#x3C;boolean></a></li>
</ul>
<p>Set to <code>true</code> if the <code>QuicSession</code> has been destroyed.</p>
<h4><code>quicsession.duration</code><span><a class="mark" href="#quic_quicsession_duration" id="quic_quicsession_duration">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a></li>
</ul>
<p>The length of time the <code>QuicSession</code> was active.</p>
<h4><code>quicsession.getCertificate()</code><span><a class="mark" href="#quic_quicsession_getcertificate" id="quic_quicsession_getcertificate">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Returns: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="type">&#x3C;Object></a> A <a href="https://nodejs.org/dist/latest-v12.x/docs/api/tls.html#tls_certificate_object">Certificate Object</a>.</li>
</ul>
<p>Returns an object representing the <em>local</em> certificate. The returned object has
some properties corresponding to the fields of the certificate.</p>
<p>If there is no local certificate, or if the <code>QuicSession</code> has been destroyed,
an empty object will be returned.</p>
<h4><code>quicsession.getPeerCertificate([detailed])</code><span><a class="mark" href="#quic_quicsession_getpeercertificate_detailed" id="quic_quicsession_getpeercertificate_detailed">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li><code>detailed</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&#x3C;boolean></a> Include the full certificate chain if <code>true</code>, otherwise
include just the peer's certificate. <strong>Default</strong>: <code>false</code>.</li>
<li>Returns: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="type">&#x3C;Object></a> A <a href="https://nodejs.org/dist/latest-v12.x/docs/api/tls.html#tls_certificate_object">Certificate Object</a>.</li>
</ul>
<p>Returns an object representing the peer's certificate. If the peer does not
provide a certificate, or if the <code>QuicSession</code> has been destroyed, an empty
object will be returned.</p>
<p>If the full certificate chain was requested (<code>details</code> equals <code>true</code>), each
certificate will include an <code>issuerCertificate</code> property containing an object
representing the issuer's certificate.</p>
<h4><code>quicsession.handshakeAckHistogram</code><span><a class="mark" href="#quic_quicsession_handshakeackhistogram" id="quic_quicsession_handshakeackhistogram">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<p>TBD</p>
<h4><code>quicsession.handshakeContinuationHistogram</code><span><a class="mark" href="#quic_quicsession_handshakecontinuationhistogram" id="quic_quicsession_handshakecontinuationhistogram">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<p>TBD</p>
<h4><code>quicsession.handshakeComplete</code><span><a class="mark" href="#quic_quicsession_handshakecomplete" id="quic_quicsession_handshakecomplete">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&#x3C;boolean></a></li>
</ul>
<p>Set to <code>true</code> if the TLS handshake has completed.</p>
<h4><code>quicsession.handshakeConfirmed</code><span><a class="mark" href="#quic_quicsession_handshakeconfirmed" id="quic_quicsession_handshakeconfirmed">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&#x3C;boolean></a></li>
</ul>
<p>Set to <code>true</code> when the TLS handshake completion has been confirmed.</p>
<h4><code>quicsession.handshakeDuration</code><span><a class="mark" href="#quic_quicsession_handshakeduration" id="quic_quicsession_handshakeduration">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a></li>
</ul>
<p>The length of time taken to complete the TLS handshake.</p>
<h4><code>quicsession.idleTimeout</code><span><a class="mark" href="#quic_quicsession_idletimeout" id="quic_quicsession_idletimeout">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&#x3C;boolean></a></li>
</ul>
<p>Set to <code>true</code> if the <code>QuicSession</code> was closed due to an idle timeout.</p>
<h4><code>quicsession.keyUpdateCount</code><span><a class="mark" href="#quic_quicsession_keyupdatecount" id="quic_quicsession_keyupdatecount">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a></li>
</ul>
<p>The number of key update operations that have occurred.</p>
<h4><code>quicsession.latestRTT</code><span><a class="mark" href="#quic_quicsession_latestrtt" id="quic_quicsession_latestrtt">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a></li>
</ul>
<p>The most recently recorded RTT for this <code>QuicSession</code>.</p>
<h4><code>quicsession.lossRetransmitCount</code><span><a class="mark" href="#quic_quicsession_lossretransmitcount" id="quic_quicsession_lossretransmitcount">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a></li>
</ul>
<p>The number of lost-packet retransmissions that have been performed on
this <code>QuicSession</code>.</p>
<h4><code>quicsession.maxDataLeft</code><span><a class="mark" href="#quic_quicsession_maxdataleft" id="quic_quicsession_maxdataleft">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a></li>
</ul>
<p>The total number of bytes the <code>QuicSession</code> is <em>currently</em> allowed to
send to the connected peer.</p>
<h4><code>quicsession.maxInFlightBytes</code><span><a class="mark" href="#quic_quicsession_maxinflightbytes" id="quic_quicsession_maxinflightbytes">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a></li>
</ul>
<p>The maximum number of in-flight bytes recorded for this <code>QuicSession</code>.</p>
<h4><code>quicsession.maxStreams</code><span><a class="mark" href="#quic_quicsession_maxstreams" id="quic_quicsession_maxstreams">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="type">&#x3C;Object></a>
<ul>
<li><code>uni</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a> The maximum number of unidirectional streams.</li>
<li><code>bidi</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a> The maximum number of bidirectional streams.</li>
</ul>
</li>
</ul>
<p>The highest cumulative number of bidirectional and unidirectional streams
that can currently be opened. The values are set initially by configuration
parameters when the <code>QuicSession</code> is created, then updated over the lifespan
of the <code>QuicSession</code> as the connected peer allows new streams to be created.</p>
<h4><code>quicsession.minRTT</code><span><a class="mark" href="#quic_quicsession_minrtt" id="quic_quicsession_minrtt">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a></li>
</ul>
<p>The minimum RTT recorded so far for this <code>QuicSession</code>.</p>
<h4><code>quicsession.openStream([options])</code><span><a class="mark" href="#quic_quicsession_openstream_options" id="quic_quicsession_openstream_options">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="type">&#x3C;Object></a>
<ul>
<li><code>halfOpen</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&#x3C;boolean></a> Set to <code>true</code> to open a unidirectional stream, <code>false</code>
to open a bidirectional stream. <strong>Default</strong>: <code>true</code>.</li>
<li><code>highWaterMark</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a> Total number of bytes that the <code>QuicStream</code> may
buffer internally before the <code>quicstream.write()</code> function starts returning
<code>false</code>. Default: <code>16384</code>.</li>
<li><code>defaultEncoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a> The default encoding that is used when no
encoding is specified as an argument to <code>quicstream.write()</code>. Default:
<code>'utf8'</code>.</li>
</ul>
</li>
<li>Returns: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" class="type">&#x3C;Promise></a> containing <a href="quic.html#quic_class_quicstream_extends_stream_duplex" class="type">&#x3C;QuicStream></a></li>
</ul>
<p>Returns a <code>Promise</code> that resolves a new <code>QuicStream</code>.</p>
<p>The <code>Promise</code> will be rejected if the <code>QuicSession</code> has been destroyed, is in
the process of a graceful shutdown, or the <code>QuicSession</code> is otherwise blocked
from opening a new stream.</p>
<h4><code>quicsession.ping()</code><span><a class="mark" href="#quic_quicsession_ping" id="quic_quicsession_ping">#</a></span></h4>
<!--YAML
added: v15.0.0
-->
<p>The <code>ping()</code> method will trigger the underlying QUIC connection to serialize
any frames currently pending in the outbound queue if it is able to do so.
This has the effect of keeping the connection with the peer active and resets
the idle and retransmission timers. The <code>ping()</code> method is a best-effort
that ignores any errors that may occur during the serialization and send
operations. There is no return value and there is no way to monitor the status
of the <code>ping()</code> operation.</p>
<h4><code>quicsession.peerInitiatedStreamCount</code><span><a class="mark" href="#quic_quicsession_peerinitiatedstreamcount" id="quic_quicsession_peerinitiatedstreamcount">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a></li>
</ul>
<p>The total number of <code>QuicStreams</code> initiated by the connected peer.</p>
<h4><code>quicsession.qlog</code><span><a class="mark" href="#quic_quicsession_qlog" id="quic_quicsession_qlog">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="stream.html#stream_class_stream_readable" class="type">&#x3C;stream.Readable></a></li>
</ul>
<p>If <code>qlog</code> support is enabled for <code>QuicSession</code>, the <code>quicsession.qlog</code> property
provides a <a href="#stream_class_stream_readable"><code>stream.Readable</code></a> that may be used to access the <code>qlog</code> event
data according to the <a href="https://tools.ietf.org/id/draft-marx-qlog-event-definitions-quic-h3-00.html">qlog standard</a>. For client <code>QuicSessions</code>, the
<code>quicsession.qlog</code> property will be <code>undefined</code> until the <code>'qlog'</code> event
is emitted.</p>
<h4><code>quicsession.remoteAddress</code><span><a class="mark" href="#quic_quicsession_remoteaddress" id="quic_quicsession_remoteaddress">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="type">&#x3C;Object></a>
<ul>
<li><code>address</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a> The local IPv4 or IPv6 address to which the <code>QuicSession</code>
is connected.</li>
<li><code>family</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a> Either <code>'IPv4'</code> or <code>'IPv6'</code>.</li>
<li><code>port</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a> The local IP port to which the <code>QuicSocket</code> is bound.</li>
</ul>
</li>
</ul>
<p>An object containing the remote address information for the connected peer.</p>
<h4><code>quicsession.selfInitiatedStreamCount</code><span><a class="mark" href="#quic_quicsession_selfinitiatedstreamcount" id="quic_quicsession_selfinitiatedstreamcount">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a></li>
</ul>
<p>The total number of <code>QuicStream</code> instances initiated by this <code>QuicSession</code>.</p>
<h4><code>quicsession.servername</code><span><a class="mark" href="#quic_quicsession_servername" id="quic_quicsession_servername">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a></li>
</ul>
<p>The SNI servername requested for this session by the client.</p>
<h4><code>quicsession.smoothedRTT</code><span><a class="mark" href="#quic_quicsession_smoothedrtt" id="quic_quicsession_smoothedrtt">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a></li>
</ul>
<p>The modified RTT calculated for this <code>QuicSession</code>.</p>
<h4><code>quicsession.socket</code><span><a class="mark" href="#quic_quicsession_socket" id="quic_quicsession_socket">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="quic.html#quic_net_createquicsocket_options" class="type">&#x3C;QuicSocket></a></li>
</ul>
<p>The <code>QuicSocket</code> the <code>QuicSession</code> is associated with.</p>
<h4><code>quicsession.statelessReset</code><span><a class="mark" href="#quic_quicsession_statelessreset" id="quic_quicsession_statelessreset">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&#x3C;boolean></a></li>
</ul>
<p>True if the <code>QuicSession</code> was closed due to QUIC stateless reset.</p>
<h4><code>quicsession.uniStreamCount</code><span><a class="mark" href="#quic_quicsession_unistreamcount" id="quic_quicsession_unistreamcount">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a></li>
</ul>
<p>The total number of unidirectional streams created on this <code>QuicSession</code>.</p>
<h4><code>quicsession.updateKey()</code><span><a class="mark" href="#quic_quicsession_updatekey" id="quic_quicsession_updatekey">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Returns: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&#x3C;boolean></a> <code>true</code> if the key update operation is successfully
initiated.</li>
</ul>
<p>Initiates QuicSession key update.</p>
<p>An error will be thrown if called before <code>quicsession.handshakeConfirmed</code>
is equal to <code>true</code>.</p>
<h4><code>quicsession.usingEarlyData</code><span><a class="mark" href="#quic_quicsession_usingearlydata" id="quic_quicsession_usingearlydata">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&#x3C;boolean></a></li>
</ul>
<p>On server <code>QuicSession</code> instances, set to <code>true</code> on completion of the TLS
handshake if early data is enabled. On client <code>QuicSession</code> instances,
set to true on handshake completion if early data is enabled <em>and</em> was
accepted by the server.</p>
<h3>Class: <code>QuicClientSession extends QuicSession</code><span><a class="mark" href="#quic_class_quicclientsession_extends_quicsession" id="quic_class_quicclientsession_extends_quicsession">#</a></span></h3>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Extends: <a href="quic.html#quic_class_quicserversession_extends_quicsession" class="type">&#x3C;QuicSession></a></li>
</ul>
<p>The <code>QuicClientSession</code> class implements the client side of a QUIC connection.
Instances are created using the <code>quicsocket.connect()</code> method.</p>
<h4>Event: <code>'sessionTicket'</code><span><a class="mark" href="#quic_event_sessionticket" id="quic_event_sessionticket">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<p>The <code>'sessionTicket'</code> event is emitted when a new TLS session ticket has been
generated for the current <code>QuicClientSession</code>. The callback is invoked with
two arguments:</p>
<ul>
<li><code>sessionTicket</code> <a href="buffer.html#buffer_class_buffer" class="type">&#x3C;Buffer></a> The serialized session ticket.</li>
<li><code>remoteTransportParams</code> <a href="buffer.html#buffer_class_buffer" class="type">&#x3C;Buffer></a> The serialized remote transport parameters
provided by the QUIC server.</li>
</ul>
<p>The <code>sessionTicket</code> and <code>remoteTransportParams</code> are useful when creating a new
<code>QuicClientSession</code> to more quickly resume an existing session.</p>
<p>The <code>'sessionTicket'</code> event may be emitted multiple times.</p>
<h4>Event: <code>'qlog'</code><span><a class="mark" href="#quic_event_qlog" id="quic_event_qlog">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<p>The <code>'qlog'</code> event is emitted when the <code>QuicClientSession</code> is ready to begin
providing <code>qlog</code> event data. The callback is invoked with a single argument:</p>
<ul>
<li><code>qlog</code> <a href="stream.html#stream_class_stream_readable" class="type">&#x3C;stream.Readable></a> A <a href="#stream_class_stream_readable"><code>stream.Readable</code></a> that is also available using
the <code>quicsession.qlog</code> property.</li>
</ul>
<h4>Event: <code>'usePreferredAddress'</code><span><a class="mark" href="#quic_event_usepreferredaddress" id="quic_event_usepreferredaddress">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<p>The <code>'usePreferredAddress'</code> event is emitted when the client <code>QuicSession</code>
is updated to use the server-advertised preferred address. The callback is
invoked with a single <code>address</code> argument:</p>
<ul>
<li><code>address</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="type">&#x3C;Object></a>
<ul>
<li><code>address</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a> The preferred host name</li>
<li><code>port</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a> The preferred IP port</li>
<li><code>type</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a> Either <code>'udp4'</code> or <code>'udp6'</code>.</li>
</ul>
</li>
</ul>
<p>This event is purely informational and will be emitted only when
<code>preferredAddressPolicy</code> is set to <code>'accept'</code>.</p>
<p>The <code>'usePreferredAddress'</code> event will not be emitted more than once.</p>
<h4><code>quicclientsession.ephemeralKeyInfo</code><span><a class="mark" href="#quic_quicclientsession_ephemeralkeyinfo" id="quic_quicclientsession_ephemeralkeyinfo">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="type">&#x3C;Object></a></li>
</ul>
<p>An object representing the type, name, and size of parameter of an ephemeral
key exchange in Perfect Forward Secrecy on a client connection. It is an
empty object when the key exchange is not ephemeral. The supported types are
<code>'DH'</code> and <code>'ECDH'</code>. The <code>name</code> property is available only when type is
<code>'ECDH'</code>.</p>
<p>For example: <code>{ type: 'ECDH', name: 'prime256v1', size: 256 }</code>.</p>
<h4><code>quicclientsession.setSocket(socket[, natRebinding])</code><span><a class="mark" href="#quic_quicclientsession_setsocket_socket_natrebinding" id="quic_quicclientsession_setsocket_socket_natrebinding">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li><code>socket</code> <a href="quic.html#quic_net_createquicsocket_options" class="type">&#x3C;QuicSocket></a> A <code>QuicSocket</code> instance to move this session to.</li>
<li><code>natRebinding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&#x3C;boolean></a> When <code>true</code>, indicates that the local address is to
be changed without triggering address validation. This will be rare and will
typically be used only to test resiliency in NAT rebind scenarios.
<strong>Default</strong>: <code>false</code>.</li>
<li>Returns: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" class="type">&#x3C;Promise></a></li>
</ul>
<p>Migrates the <code>QuicClientSession</code> to the given <code>QuicSocket</code> instance. If the new
<code>QuicSocket</code> has not yet been bound to a local UDP port, it will be bound prior
to attempting the migration.</p>
<h3>Class: <code>QuicServerSession extends QuicSession</code><span><a class="mark" href="#quic_class_quicserversession_extends_quicsession" id="quic_class_quicserversession_extends_quicsession">#</a></span></h3>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Extends: <a href="quic.html#quic_class_quicserversession_extends_quicsession" class="type">&#x3C;QuicSession></a></li>
</ul>
<p>The <code>QuicServerSession</code> class implements the server side of a QUIC connection.
Instances are created internally and are emitted using the <code>QuicSocket</code>
<code>'session'</code> event.</p>
<h3>Class: <code>QuicSocket</code><span><a class="mark" href="#quic_class_quicsocket" id="quic_class_quicsocket">#</a></span></h3>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<p>New instances of <code>QuicSocket</code> are created using the <code>net.createQuicSocket()</code>
method, and can be used as both a client and a server.</p>
<h4>Event: <code>'busy'</code><span><a class="mark" href="#quic_event_busy" id="quic_event_busy">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<p>Emitted when the server busy state has been toggled using
<code>quicSocket.serverBusy = true | false</code>. The callback is invoked with no
arguments. Use the <code>quicsocket.serverBusy</code> property to determine the
current status. This event is strictly informational.</p>
<pre><code class="language-js"><span class="hljs-keyword">const</span> { createQuicSocket } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'net'</span>);

<span class="hljs-keyword">const</span> socket = createQuicSocket();

socket.on(<span class="hljs-string">'busy'</span>, <span class="hljs-function">() =></span> {
  <span class="hljs-keyword">if</span> (socket.serverBusy)
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Server is busy'</span>);
  <span class="hljs-keyword">else</span>
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Server is not busy'</span>);
});

socket.serverBusy = <span class="hljs-literal">true</span>;
socket.serverBusy = <span class="hljs-literal">false</span>;</code></pre>
<p>This <code>'busy'</code> event may be emitted multiple times.</p>
<h4>Event: <code>'close'</code><span><a class="mark" href="#quic_event_close_1" id="quic_event_close_1">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<p>Emitted after the <code>QuicSocket</code> has been destroyed and is no longer usable.</p>
<p>The <code>'close'</code> event will only ever be emitted once.</p>
<h4>Event: <code>'endpointClose'</code><span><a class="mark" href="#quic_event_endpointclose" id="quic_event_endpointclose">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<p>Emitted after a <code>QuicEndpoint</code> associated with the <code>QuicSocket</code> closes and
has been destroyed. The handler will be invoked with two arguments:</p>
<ul>
<li><code>endpoint</code> <a href="quic.html#quic_class_quicendpoint" class="type">&#x3C;QuicEndpoint></a> The <code>QuicEndpoint</code> that has been destroyed.</li>
<li><code>error</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" class="type">&#x3C;Error></a> An <code>Error</code> object if the <code>QuicEndpoint</code> was destroyed because
of an error.</li>
</ul>
<p>When all of the <code>QuicEndpoint</code> instances associated with a <code>QuicSocket</code> have
closed, the <code>QuicEndpoint</code> will also automatically close.</p>
<h4>Event: <code>'error'</code><span><a class="mark" href="#quic_event_error_1" id="quic_event_error_1">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<p>Emitted before the <code>'close'</code> event if the <code>QuicSocket</code> was destroyed with an
<code>error</code>.</p>
<p>The <code>'error'</code> event will only ever be emitted once.</p>
<h4>Event: <code>'listening'</code><span><a class="mark" href="#quic_event_listening" id="quic_event_listening">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<p>Emitted after <code>quicsocket.listen()</code> is called and the <code>QuicSocket</code> has started
listening for incoming <code>QuicServerSession</code>s.  The callback is invoked with
no arguments.</p>
<p>The <code>'listening'</code> event will only ever be emitted once.</p>
<h4>Event: <code>'ready'</code><span><a class="mark" href="#quic_event_ready" id="quic_event_ready">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<p>Emitted once the <code>QuicSocket</code> has been bound to a local UDP port.</p>
<p>The <code>'ready'</code> event will only ever be emitted once.</p>
<h4>Event: <code>'session'</code><span><a class="mark" href="#quic_event_session" id="quic_event_session">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<p>Emitted when a new <code>QuicServerSession</code> has been created. The callback is
invoked with a single argument providing the newly created <code>QuicServerSession</code>
object.</p>
<pre><code class="language-js"><span class="hljs-keyword">const</span> { createQuicSocket } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'net'</span>);

<span class="hljs-keyword">const</span> options = getOptionsSomehow();
<span class="hljs-keyword">const</span> server = createQuicSocket({ <span class="hljs-attr">server</span>: options });

server.on(<span class="hljs-string">'session'</span>, <span class="hljs-function">(<span class="hljs-params">session</span>) =></span> {
  <span class="hljs-comment">// Attach session event listeners.</span>
});

server.listen();</code></pre>
<p>The <code>'session'</code> event will be emitted multiple times.</p>
<p>The <code>'session'</code> event handler can be an async function.</p>
<p>If the <code>'session'</code> event handler throws an error, or if it returns a <code>Promise</code>
that is rejected, the error will be handled by destroying the <code>QuicServerSession</code>
automatically and emitting a <code>'sessionError'</code> event on the <code>QuicSocket</code>.</p>
<h4>Event: <code>'sessionError'</code><span><a class="mark" href="#quic_event_sessionerror" id="quic_event_sessionerror">#</a></span></h4>
<!--YAML
added: v15.0.0
-->
<p>Emitted when an error occurs processing an event related to a specific
<code>QuicSession</code> instance. The callback is invoked with two arguments:</p>
<ul>
<li><code>error</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" class="type">&#x3C;Error></a> The error that was either thrown or rejected.</li>
<li><code>session</code> <a href="quic.html#quic_class_quicserversession_extends_quicsession" class="type">&#x3C;QuicSession></a> The <code>QuicSession</code> instance that was destroyed.</li>
</ul>
<p>The <code>QuicSession</code> instance will have been destroyed by the time the
<code>'sessionError'</code> event is emitted.</p>
<pre><code class="language-js"><span class="hljs-keyword">const</span> { createQuicSocket } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'net'</span>);

<span class="hljs-keyword">const</span> options = getOptionsSomehow();
<span class="hljs-keyword">const</span> server = createQuicSocket({ <span class="hljs-attr">server</span>: options });
server.listen();

server.on(<span class="hljs-string">'session'</span>, <span class="hljs-function">(<span class="hljs-params">session</span>) =></span> {
  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'boom'</span>);
});

server.on(<span class="hljs-string">'sessionError'</span>, <span class="hljs-function">(<span class="hljs-params">error, session</span>) =></span> {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'error:'</span>, error.message);
});</code></pre>
<h4><code>quicsocket.addEndpoint(options)</code><span><a class="mark" href="#quic_quicsocket_addendpoint_options" id="quic_quicsocket_addendpoint_options">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li><code>options</code>: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="type">&#x3C;Object></a> An object describing the local address to bind to.
<ul>
<li><code>address</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a> The local address to bind to. This may be an IPv4 or
IPv6 address or a host name. If a host name is given, it will be resolved
to an IP address.</li>
<li><code>port</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a> The local port to bind to.</li>
<li><code>type</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a> Can be one of <code>'udp4'</code>, <code>'upd6'</code>, or <code>'udp6-only'</code> to
use IPv4, IPv6, or IPv6 with dual-stack mode disabled.
<strong>Default</strong>: <code>'udp4'</code>.</li>
<li><code>lookup</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" class="type">&#x3C;Function></a> A <a href="#quic_custom_dns_lookup_functions">custom DNS lookup function</a>.
<strong>Default</strong>: undefined.</li>
</ul>
</li>
<li>Returns: <a href="quic.html#quic_class_quicendpoint" class="type">&#x3C;QuicEndpoint></a></li>
</ul>
<p>Creates and adds a new <code>QuicEndpoint</code> to the <code>QuicSocket</code> instance. An
error will be thrown if <code>quicsocket.addEndpoint()</code> is called either after
the <code>QuicSocket</code> has already started binding to the local ports, or after
the <code>QuicSocket</code> has been destroyed.</p>
<h4><code>quicsocket.blockList</code><span><a class="mark" href="#quic_quicsocket_blocklist" id="quic_quicsocket_blocklist">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="net.html#net_class_net_blocklist" class="type">&#x3C;net.BlockList></a></li>
</ul>
<p>A <a href="net.html#net_class_net_blocklist" class="type">&#x3C;net.BlockList></a> instance used to define rules for remote IPv4 or IPv6
addresses that this <code>QuicSocket</code> is not permitted to interact with. The
rules can be specified as either specific individual addresses, ranges
of addresses, or CIDR subnet ranges.</p>
<p>When listening as a server, if a packet is received from a blocked address,
the packet will be ignored.</p>
<p>When connecting as a client, if the remote IP address is blocked, the
connection attempt will be rejected.</p>
<h4><code>quicsocket.bound</code><span><a class="mark" href="#quic_quicsocket_bound" id="quic_quicsocket_bound">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&#x3C;boolean></a></li>
</ul>
<p>Will be <code>true</code> if the <code>QuicSocket</code> has been successfully bound to a local UDP
port. Initially the value is <code>false</code>.</p>
<p><code>QuicSocket</code> instances are not bound to a local UDP port until the first time
either <code>quicsocket.listen()</code> or <code>quicsocket.connect()</code> is called. The <code>'ready'</code>
event will be emitted once the <code>QuicSocket</code> has been bound and the value of
<code>quicsocket.bound</code> will become <code>true</code>.</p>
<p>Read-only.</p>
<h4><code>quicsocket.boundDuration</code><span><a class="mark" href="#quic_quicsocket_boundduration" id="quic_quicsocket_boundduration">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a></li>
</ul>
<p>The length of time this <code>QuicSocket</code> has been bound to a local port.</p>
<p>Read-only.</p>
<h4><code>quicsocket.bytesReceived</code><span><a class="mark" href="#quic_quicsocket_bytesreceived" id="quic_quicsocket_bytesreceived">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a></li>
</ul>
<p>The number of bytes received by this <code>QuicSocket</code>.</p>
<p>Read-only.</p>
<h4><code>quicsocket.bytesSent</code><span><a class="mark" href="#quic_quicsocket_bytessent" id="quic_quicsocket_bytessent">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a></li>
</ul>
<p>The number of bytes sent by this <code>QuicSocket</code>.</p>
<p>Read-only.</p>
<h4><code>quicsocket.clientSessions</code><span><a class="mark" href="#quic_quicsocket_clientsessions" id="quic_quicsocket_clientsessions">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a></li>
</ul>
<p>The number of client <code>QuicSession</code> instances that have been associated
with this <code>QuicSocket</code>.</p>
<p>Read-only.</p>
<h4><code>quicsocket.close()</code><span><a class="mark" href="#quic_quicsocket_close" id="quic_quicsocket_close">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Returns: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" class="type">&#x3C;Promise></a></li>
</ul>
<p>Gracefully closes the <code>QuicSocket</code>. Existing <code>QuicSession</code> instances will be
permitted to close naturally. New <code>QuicClientSession</code> and <code>QuicServerSession</code>
instances will not be allowed. The returns <code>Promise</code> will be resolved once
the <code>QuicSocket</code> is destroyed.</p>
<h4><code>quicsocket.connect([options])</code><span><a class="mark" href="#quic_quicsocket_connect_options" id="quic_quicsocket_connect_options">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="type">&#x3C;Object></a>
<ul>
<li><code>address</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a> The domain name or IP address of the QUIC server
endpoint.</li>
<li><code>alpn</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a> An ALPN protocol identifier.</li>
<li><code>ca</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string[]></a> | <a href="buffer.html#buffer_class_buffer" class="type">&#x3C;Buffer></a> | <a href="buffer.html#buffer_class_buffer" class="type">&#x3C;Buffer[]></a> Optionally override the trusted CA
certificates. Default is to trust the well-known CAs curated by Mozilla.
Mozilla's CAs are completely replaced when CAs are explicitly specified
using this option. The value can be a string or <code>Buffer</code>, or an <code>Array</code> of
strings and/or <code>Buffer</code>s. Any string or <code>Buffer</code> can contain multiple PEM
CAs concatenated together. The peer's certificate must be chainable to a CA
trusted by the server for the connection to be authenticated. When using
certificates that are not chainable to a well-known CA, the certificate's CA
must be explicitly specified as a trusted or the connection will fail to
authenticate.
If the peer uses a certificate that doesn't match or chain to one of the
default CAs, use the <code>ca</code> option to provide a CA certificate that the peer's
certificate can match or chain to.
For self-signed certificates, the certificate is its own CA, and must be
provided.
For PEM encoded certificates, supported types are "TRUSTED CERTIFICATE",
"X509 CERTIFICATE", and "CERTIFICATE".</li>
<li><code>cert</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string[]></a> | <a href="buffer.html#buffer_class_buffer" class="type">&#x3C;Buffer></a> | <a href="buffer.html#buffer_class_buffer" class="type">&#x3C;Buffer[]></a> Cert chains in PEM format. One cert
chain should be provided per private key. Each cert chain should consist of
the PEM formatted certificate for a provided private <code>key</code>, followed by the
PEM formatted intermediate certificates (if any), in order, and not
including the root CA (the root CA must be pre-known to the peer, see <code>ca</code>).
When providing multiple cert chains, they do not have to be in the same
order as their private keys in <code>key</code>. If the intermediate certificates are
not provided, the peer will not be able to validate the certificate, and the
handshake will fail.</li>
<li><code>ciphers</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a> Cipher suite specification, replacing the default. For
more information, see <a href="tls.html#tls_modifying_the_default_tls_cipher_suite">modifying the default cipher suite</a>. Permitted
ciphers can be obtained via <a href="tls.html#tls_tls_getciphers"><code>tls.getCiphers()</code></a>. Cipher names must be
uppercased in order for OpenSSL to accept them.</li>
<li><code>clientCertEngine</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a> Name of an OpenSSL engine which can provide the
client certificate.</li>
<li><code>crl</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string[]></a> | <a href="buffer.html#buffer_class_buffer" class="type">&#x3C;Buffer></a> | <a href="buffer.html#buffer_class_buffer" class="type">&#x3C;Buffer[]></a> PEM formatted CRLs (Certificate
Revocation Lists).</li>
<li><code>defaultEncoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a> The default encoding that is used when no
encoding is specified as an argument to <code>quicstream.write()</code>. Default:
<code>'utf8'</code>.</li>
<li><code>dhparam</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a> | <a href="buffer.html#buffer_class_buffer" class="type">&#x3C;Buffer></a> Diffie Hellman parameters, required for
<a href="#tls_perfect_forward_secrecy">Perfect Forward Secrecy</a>. Use <code>openssl dhparam</code> to create the parameters.
The key length must be greater than or equal to 1024 bits, otherwise an
error will be thrown. It is strongly recommended to use 2048 bits or larger
for stronger security. If omitted or invalid, the parameters are silently
discarded and DHE ciphers will not be available.</li>
<li><code>ecdhCurve</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a> A string describing a named curve or a colon separated
list of curve NIDs or names, for example <code>P-521:P-384:P-256</code>, to use for
ECDH key agreement. Set to <code>auto</code> to select the
curve automatically. Use <a href="crypto.html#crypto_crypto_getcurves"><code>crypto.getCurves()</code></a> to obtain a list of
available curve names. On recent releases, <code>openssl ecparam -list_curves</code>
will also display the name and description of each available elliptic curve.
<strong>Default:</strong> <a href="#tls_tls_default_ecdh_curve"><code>tls.DEFAULT_ECDH_CURVE</code></a>.</li>
<li><code>highWaterMark</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a> Total number of bytes that the <code>QuicStream</code> may
buffer internally before the <code>quicstream.write()</code> function starts returning
<code>false</code>. Default: <code>16384</code>.</li>
<li><code>honorCipherOrder</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&#x3C;boolean></a> Attempt to use the server's cipher suite
preferences instead of the client's. When <code>true</code>, causes
<code>SSL_OP_CIPHER_SERVER_PREFERENCE</code> to be set in <code>secureOptions</code>, see
<a href="crypto.html#crypto_openssl_options">OpenSSL Options</a> for more information.</li>
<li><code>idleTimeout</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a></li>
<li><code>key</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string[]></a> | <a href="buffer.html#buffer_class_buffer" class="type">&#x3C;Buffer></a> | <a href="buffer.html#buffer_class_buffer" class="type">&#x3C;Buffer[]></a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="type">&#x3C;Object[]></a> Private keys in PEM format.
PEM allows the option of private keys being encrypted. Encrypted keys will
be decrypted with <code>options.passphrase</code>. Multiple keys using different
algorithms can be provided either as an array of unencrypted key strings or
buffers, or an array of objects in the form <code>{pem: &#x3C;string|buffer>[, passphrase: &#x3C;string>]}</code>. The object form can only occur in an array.
<code>object.passphrase</code> is optional. Encrypted keys will be decrypted with
<code>object.passphrase</code> if provided, or <code>options.passphrase</code> if it is not.</li>
<li><code>lookup</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" class="type">&#x3C;Function></a> A <a href="#quic_custom_dns_lookup_functions">custom DNS lookup function</a>.
<strong>Default</strong>: undefined.</li>
<li><code>activeConnectionIdLimit</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a> Must be a value between <code>2</code> and <code>8</code>
(inclusive). Default: <code>2</code>.</li>
<li><code>congestionAlgorithm</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a> Must be either <code>'reno'</code> or <code>'cubic'</code>.
<strong>Default</strong>: <code>'reno'</code>.</li>
<li><code>maxAckDelay</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a></li>
<li><code>maxData</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a></li>
<li><code>maxUdpPayloadSize</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a></li>
<li><code>maxStreamDataBidiLocal</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a></li>
<li><code>maxStreamDataBidiRemote</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a></li>
<li><code>maxStreamDataUni</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a></li>
<li><code>maxStreamsBidi</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a></li>
<li><code>maxStreamsUni</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a></li>
<li><code>h3</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="type">&#x3C;Object></a> HTTP/3 Specific Configuration Options
<ul>
<li><code>qpackMaxTableCapacity</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a></li>
<li><code>qpackBlockedStreams</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a></li>
<li><code>maxHeaderListSize</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a></li>
<li><code>maxPushes</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a></li>
</ul>
</li>
<li><code>ocspHandler</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" class="type">&#x3C;Function></a> A function for handling <a href="#quic_online_certificate_status_protocol_ocsp">OCSP responses</a>.</li>
<li><code>passphrase</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a> Shared passphrase used for a single private key and/or
a PFX.</li>
<li><code>pfx</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string[]></a> | <a href="buffer.html#buffer_class_buffer" class="type">&#x3C;Buffer></a> | <a href="buffer.html#buffer_class_buffer" class="type">&#x3C;Buffer[]></a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="type">&#x3C;Object[]></a> PFX or PKCS12 encoded
private key and certificate chain. <code>pfx</code> is an alternative to providing
<code>key</code> and <code>cert</code> individually. PFX is usually encrypted, if it is,
<code>passphrase</code> will be used to decrypt it. Multiple PFX can be provided either
as an array of unencrypted PFX buffers, or an array of objects in the form
<code>{buf: &#x3C;string|buffer>[, passphrase: &#x3C;string>]}</code>. The object form can only
occur in an array. <code>object.passphrase</code> is optional. Encrypted PFX will be
decrypted with <code>object.passphrase</code> if provided, or <code>options.passphrase</code> if
it is not.</li>
<li><code>port</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a> The IP port of the remote QUIC server.</li>
<li><code>preferredAddressPolicy</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a> <code>'accept'</code> or <code>'reject'</code>. When <code>'accept'</code>,
indicates that the client will automatically use the preferred address
advertised by the server.</li>
<li><code>remoteTransportParams</code> <a href="buffer.html#buffer_class_buffer" class="type">&#x3C;Buffer></a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray" class="type">&#x3C;TypedArray></a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView" class="type">&#x3C;DataView></a> The serialized remote
transport parameters from a previously established session. These would
have been provided as part of the <code>'sessionTicket'</code> event on a previous
<code>QuicClientSession</code> object.</li>
<li><code>qlog</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&#x3C;boolean></a> Whether to enable <a href="#quic_quicsession_qlog">'qlog'</a> for this session.
Default: <code>false</code>.</li>
<li><code>secureOptions</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a> Optionally affect the OpenSSL protocol behavior,
which is not usually necessary. This should be used carefully if at all!
Value is a numeric bitmask of the <code>SSL_OP_*</code> options from
<a href="crypto.html#crypto_openssl_options">OpenSSL Options</a>.</li>
<li><code>servername</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a> The SNI servername.</li>
<li><code>sessionTicket</code>: <a href="buffer.html#buffer_class_buffer" class="type">&#x3C;Buffer></a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray" class="type">&#x3C;TypedArray></a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView" class="type">&#x3C;DataView></a> The serialized TLS Session
Ticket from a previously established session. These would have been
provided as part of the <code>'sessionTicket</code>' event on a previous
<code>QuicClientSession</code> object.</li>
<li><code>type</code>: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a> Identifies the type of UDP socket. The value must either
be <code>'udp4'</code>, indicating UDP over IPv4, or <code>'udp6'</code>, indicating UDP over
IPv6. <strong>Default</strong>: <code>'udp4'</code>.</li>
</ul>
</li>
<li>Returns: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" class="type">&#x3C;Promise></a></li>
</ul>
<p>Returns a <code>Promise</code> that resolves a new <code>QuicClientSession</code>.</p>
<h4><code>quicsocket.destroy([error])</code><span><a class="mark" href="#quic_quicsocket_destroy_error" id="quic_quicsocket_destroy_error">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li><code>error</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Data_types" class="type">&#x3C;any></a></li>
</ul>
<p>Destroys the <code>QuicSocket</code> then emits the <code>'close'</code> event when done. The <code>'error'</code>
event will be emitted after <code>'close'</code> if the <code>error</code> is not <code>undefined</code>.</p>
<h4><code>quicsocket.destroyed</code><span><a class="mark" href="#quic_quicsocket_destroyed" id="quic_quicsocket_destroyed">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&#x3C;boolean></a></li>
</ul>
<p>Will be <code>true</code> if the <code>QuicSocket</code> has been destroyed.</p>
<p>Read-only.</p>
<h4><code>quicsocket.duration</code><span><a class="mark" href="#quic_quicsocket_duration" id="quic_quicsocket_duration">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a></li>
</ul>
<p>The length of time this <code>QuicSocket</code> has been active,</p>
<p>Read-only.</p>
<h4><code>quicsocket.endpoints</code><span><a class="mark" href="#quic_quicsocket_endpoints" id="quic_quicsocket_endpoints">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="quic.html#quic_class_quicendpoint" class="type">&#x3C;QuicEndpoint[]></a></li>
</ul>
<p>An array of <code>QuicEndpoint</code> instances associated with the <code>QuicSocket</code>.</p>
<p>Read-only.</p>
<h4><code>quicsocket.listen([options])</code><span><a class="mark" href="#quic_quicsocket_listen_options" id="quic_quicsocket_listen_options">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="type">&#x3C;Object></a>
<ul>
<li><code>alpn</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a> A required ALPN protocol identifier.</li>
<li><code>ca</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string[]></a> | <a href="buffer.html#buffer_class_buffer" class="type">&#x3C;Buffer></a> | <a href="buffer.html#buffer_class_buffer" class="type">&#x3C;Buffer[]></a> Optionally override the trusted CA
certificates. Default is to trust the well-known CAs curated by Mozilla.
Mozilla's CAs are completely replaced when CAs are explicitly specified
using this option. The value can be a string or <code>Buffer</code>, or an <code>Array</code> of
strings and/or <code>Buffer</code>s. Any string or <code>Buffer</code> can contain multiple PEM
CAs concatenated together. The peer's certificate must be chainable to a CA
trusted by the server for the connection to be authenticated. When using
certificates that are not chainable to a well-known CA, the certificate's CA
must be explicitly specified as a trusted or the connection will fail to
authenticate.
If the peer uses a certificate that doesn't match or chain to one of the
default CAs, use the <code>ca</code> option to provide a CA certificate that the peer's
certificate can match or chain to.
For self-signed certificates, the certificate is its own CA, and must be
provided.
For PEM encoded certificates, supported types are "TRUSTED CERTIFICATE",
"X509 CERTIFICATE", and "CERTIFICATE".</li>
<li><code>cert</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string[]></a> | <a href="buffer.html#buffer_class_buffer" class="type">&#x3C;Buffer></a> | <a href="buffer.html#buffer_class_buffer" class="type">&#x3C;Buffer[]></a> Cert chains in PEM format. One cert
chain should be provided per private key. Each cert chain should consist of
the PEM formatted certificate for a provided private <code>key</code>, followed by the
PEM formatted intermediate certificates (if any), in order, and not
including the root CA (the root CA must be pre-known to the peer, see <code>ca</code>).
When providing multiple cert chains, they do not have to be in the same
order as their private keys in <code>key</code>. If the intermediate certificates are
not provided, the peer will not be able to validate the certificate, and the
handshake will fail.</li>
<li><code>ciphers</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a> Cipher suite specification, replacing the default. For
more information, see <a href="tls.html#tls_modifying_the_default_tls_cipher_suite">modifying the default cipher suite</a>. Permitted
ciphers can be obtained via <a href="tls.html#tls_tls_getciphers"><code>tls.getCiphers()</code></a>. Cipher names must be
uppercased in order for OpenSSL to accept them.</li>
<li><code>clientCertEngine</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a> Name of an OpenSSL engine which can provide the
client certificate.</li>
<li><code>clientHelloHandler</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" class="type">&#x3C;Function></a> An async function that may be used to
set a <a href="tls.html#tls_tls_createsecurecontext_options" class="type">&#x3C;tls.SecureContext></a> for the given server name at the start of the
TLS handshake. See <a href="#quic_handling_client_hello">Handling client hello</a> for details.</li>
<li><code>crl</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string[]></a> | <a href="buffer.html#buffer_class_buffer" class="type">&#x3C;Buffer></a> | <a href="buffer.html#buffer_class_buffer" class="type">&#x3C;Buffer[]></a> PEM formatted CRLs (Certificate
Revocation Lists).</li>
<li><code>defaultEncoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a> The default encoding that is used when no
encoding is specified as an argument to <code>quicstream.write()</code>. Default:
<code>'utf8'</code>.</li>
<li><code>dhparam</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a> | <a href="buffer.html#buffer_class_buffer" class="type">&#x3C;Buffer></a> Diffie Hellman parameters, required for
<a href="#tls_perfect_forward_secrecy">Perfect Forward Secrecy</a>. Use <code>openssl dhparam</code> to create the parameters.
The key length must be greater than or equal to 1024 bits, otherwise an
error will be thrown. It is strongly recommended to use 2048 bits or larger
for stronger security. If omitted or invalid, the parameters are silently
discarded and DHE ciphers will not be available.</li>
<li><code>earlyData</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&#x3C;boolean></a> Set to <code>false</code> to disable 0RTT early data.
Default: <code>true</code>.</li>
<li><code>ecdhCurve</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a> A string describing a named curve or a colon separated
list of curve NIDs or names, for example <code>P-521:P-384:P-256</code>, to use for
ECDH key agreement. Set to <code>auto</code> to select the
curve automatically. Use <a href="crypto.html#crypto_crypto_getcurves"><code>crypto.getCurves()</code></a> to obtain a list of
available curve names. On recent releases, <code>openssl ecparam -list_curves</code>
will also display the name and description of each available elliptic curve.
<strong>Default:</strong> <a href="#tls_tls_default_ecdh_curve"><code>tls.DEFAULT_ECDH_CURVE</code></a>.</li>
<li><code>highWaterMark</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a> Total number of bytes that <code>QuicStream</code> instances
may buffer internally before the <code>quicstream.write()</code> function starts
returning <code>false</code>. Default: <code>16384</code>.</li>
<li><code>honorCipherOrder</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&#x3C;boolean></a> Attempt to use the server's cipher suite
references instead of the client's. When <code>true</code>, causes
<code>SSL_OP_CIPHER_SERVER_PREFERENCE</code> to be set in <code>secureOptions</code>, see
<a href="crypto.html#crypto_openssl_options">OpenSSL Options</a> for more information.</li>
<li><code>idleTimeout</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a></li>
<li><code>key</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string[]></a> | <a href="buffer.html#buffer_class_buffer" class="type">&#x3C;Buffer></a> | <a href="buffer.html#buffer_class_buffer" class="type">&#x3C;Buffer[]></a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="type">&#x3C;Object[]></a> Private keys in PEM format.
PEM allows the option of private keys being encrypted. Encrypted keys will
be decrypted with <code>options.passphrase</code>. Multiple keys using different
algorithms can be provided either as an array of unencrypted key strings or
buffers, or an array of objects in the form <code>{pem: &#x3C;string|buffer>[, passphrase: &#x3C;string>]}</code>. The object form can only occur in an array.
<code>object.passphrase</code> is optional. Encrypted keys will be decrypted with
<code>object.passphrase</code> if provided, or <code>options.passphrase</code> if it is not.</li>
<li><code>lookup</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" class="type">&#x3C;Function></a> A <a href="#quic_custom_dns_lookup_functions">custom DNS lookup function</a>.
<strong>Default</strong>: undefined.</li>
<li><code>activeConnectionIdLimit</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a></li>
<li><code>congestionAlgorithm</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a> Must be either <code>'reno'</code> or <code>'cubic'</code>.
<strong>Default</strong>: <code>'reno'</code>.</li>
<li><code>maxAckDelay</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a></li>
<li><code>maxData</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a></li>
<li><code>maxUdpPayloadSize</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a></li>
<li><code>maxStreamsBidi</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a></li>
<li><code>maxStreamsUni</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a></li>
<li><code>maxStreamDataBidiLocal</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a></li>
<li><code>maxStreamDataBidiRemote</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a></li>
<li><code>maxStreamDataUni</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a></li>
<li><code>ocspHandler</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" class="type">&#x3C;Function></a> A function for handling <a href="#quic_online_certificate_status_protocol_ocsp">OCSP requests</a>.</li>
<li><code>passphrase</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a> Shared passphrase used for a single private key
and/or a PFX.</li>
<li><code>pfx</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string[]></a> | <a href="buffer.html#buffer_class_buffer" class="type">&#x3C;Buffer></a> | <a href="buffer.html#buffer_class_buffer" class="type">&#x3C;Buffer[]></a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="type">&#x3C;Object[]></a> PFX or PKCS12 encoded
private key and certificate chain. <code>pfx</code> is an alternative to providing
<code>key</code> and <code>cert</code> individually. PFX is usually encrypted, if it is,
<code>passphrase</code> will be used to decrypt it. Multiple PFX can be provided either
as an array of unencrypted PFX buffers, or an array of objects in the form
<code>{buf: &#x3C;string|buffer>[, passphrase: &#x3C;string>]}</code>. The object form can only
occur in an array. <code>object.passphrase</code> is optional. Encrypted PFX will be
decrypted with <code>object.passphrase</code> if provided, or <code>options.passphrase</code> if
it is not.</li>
<li><code>preferredAddress</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="type">&#x3C;Object></a>
<ul>
<li><code>address</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a></li>
<li><code>port</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a></li>
<li><code>type</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a> <code>'udp4'</code> or <code>'udp6'</code>.</li>
</ul>
</li>
<li><code>requestCert</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&#x3C;boolean></a> Request a certificate used to authenticate the
client.</li>
<li><code>rejectUnauthorized</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&#x3C;boolean></a> If not <code>false</code> the server will reject any
connection which is not authorized with the list of supplied CAs. This
option only has an effect if <code>requestCert</code> is <code>true</code>. Default: <code>true</code>.</li>
<li><code>secureOptions</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a> Optionally affect the OpenSSL protocol behavior,
which is not usually necessary. This should be used carefully if at all!
Value is a numeric bitmask of the <code>SSL_OP_*</code> options from
<a href="crypto.html#crypto_openssl_options">OpenSSL Options</a>.</li>
<li><code>sessionIdContext</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a> Opaque identifier used by servers to ensure
session state is not shared between applications. Unused by clients.</li>
</ul>
</li>
<li>Returns: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" class="type">&#x3C;Promise></a></li>
</ul>
<p>Listen for new peer-initiated sessions. Returns a <code>Promise</code> that is resolved
once the <code>QuicSocket</code> is actively listening.</p>
<h4><code>quicsocket.listenDuration</code><span><a class="mark" href="#quic_quicsocket_listenduration" id="quic_quicsocket_listenduration">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a></li>
</ul>
<p>The length of time this <code>QuicSocket</code> has been listening for connections.</p>
<p>Read-only</p>
<h4><code>quicsocket.listening</code><span><a class="mark" href="#quic_quicsocket_listening" id="quic_quicsocket_listening">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&#x3C;boolean></a></li>
</ul>
<p>Set to <code>true</code> if the <code>QuicSocket</code> is listening for new connections.</p>
<p>Read-only.</p>
<h4><code>quicsocket.packetsIgnored</code><span><a class="mark" href="#quic_quicsocket_packetsignored" id="quic_quicsocket_packetsignored">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a></li>
</ul>
<p>The number of packets received by this <code>QuicSocket</code> that have been ignored.</p>
<p>Read-only.</p>
<h4><code>quicsocket.packetsReceived</code><span><a class="mark" href="#quic_quicsocket_packetsreceived" id="quic_quicsocket_packetsreceived">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a></li>
</ul>
<p>The number of packets successfully received by this <code>QuicSocket</code>.</p>
<p>Read-only</p>
<h4><code>quicsocket.packetsSent</code><span><a class="mark" href="#quic_quicsocket_packetssent" id="quic_quicsocket_packetssent">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a></li>
</ul>
<p>The number of packets sent by this <code>QuicSocket</code>.</p>
<p>Read-only</p>
<h4><code>quicsocket.pending</code><span><a class="mark" href="#quic_quicsocket_pending" id="quic_quicsocket_pending">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&#x3C;boolean></a></li>
</ul>
<p>Set to <code>true</code> if the socket is not yet bound to the local UDP port.</p>
<p>Read-only.</p>
<h4><code>quicsocket.ref()</code><span><a class="mark" href="#quic_quicsocket_ref" id="quic_quicsocket_ref">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<h4><code>quicsocket.serverBusy</code><span><a class="mark" href="#quic_quicsocket_serverbusy" id="quic_quicsocket_serverbusy">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&#x3C;boolean></a> When <code>true</code>, the <code>QuicSocket</code> will reject new connections.</li>
</ul>
<p>Setting <code>quicsocket.serverBusy</code> to <code>true</code> will tell the <code>QuicSocket</code>
to reject all new incoming connection requests using the <code>SERVER_BUSY</code> QUIC
error code. To begin receiving connections again, disable busy mode by setting
<code>quicsocket.serverBusy = false</code>.</p>
<h4><code>quicsocket.serverBusyCount</code><span><a class="mark" href="#quic_quicsocket_serverbusycount" id="quic_quicsocket_serverbusycount">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a></li>
</ul>
<p>The number of <code>QuicSession</code> instances rejected due to server busy status.</p>
<p>Read-only.</p>
<h4><code>quicsocket.serverSessions</code><span><a class="mark" href="#quic_quicsocket_serversessions" id="quic_quicsocket_serversessions">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a></li>
</ul>
<p>The number of server <code>QuicSession</code> instances that have been associated with
this <code>QuicSocket</code>.</p>
<p>Read-only.</p>
<h4><code>quicsocket.setDiagnosticPacketLoss(options)</code><span><a class="mark" href="#quic_quicsocket_setdiagnosticpacketloss_options" id="quic_quicsocket_setdiagnosticpacketloss_options">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="type">&#x3C;Object></a>
<ul>
<li><code>rx</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a> A value in the range <code>0.0</code> to <code>1.0</code> that specifies the
probability of received packet loss.</li>
<li><code>tx</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a> A value in the range <code>0.0</code> to <code>1.0</code> that specifies the
probability of transmitted packet loss.</li>
</ul>
</li>
</ul>
<p>The <code>quicsocket.setDiagnosticPacketLoss()</code> method is a diagnostic only tool
that can be used to <em>simulate</em> packet loss conditions for this <code>QuicSocket</code>
by artificially dropping received or transmitted packets.</p>
<p>This method is <em>not</em> to be used in production applications.</p>
<h4><code>quicsocket.statelessReset</code><span><a class="mark" href="#quic_quicsocket_statelessreset" id="quic_quicsocket_statelessreset">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&#x3C;boolean></a> <code>true</code> if stateless reset processing is enabled; <code>false</code>
if disabled.</li>
</ul>
<p>By default, a listening <code>QuicSocket</code> will generate stateless reset tokens when
appropriate. The <code>disableStatelessReset</code> option may be set when the
<code>QuicSocket</code> is created to disable generation of stateless resets. The
<code>quicsocket.statelessReset</code> property allows stateless reset to be turned on and
off dynamically through the lifetime of the <code>QuicSocket</code>.</p>
<h4><code>quicsocket.statelessResetCount</code><span><a class="mark" href="#quic_quicsocket_statelessresetcount" id="quic_quicsocket_statelessresetcount">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a></li>
</ul>
<p>The number of stateless resets that have been sent.</p>
<p>Read-only.</p>
<h4><code>quicsocket.unref();</code><span><a class="mark" href="#quic_quicsocket_unref" id="quic_quicsocket_unref">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<h3>Class: <code>QuicStream extends stream.Duplex</code><span><a class="mark" href="#quic_class_quicstream_extends_stream_duplex" id="quic_class_quicstream_extends_stream_duplex">#</a></span></h3>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Extends: <a href="stream.html#stream_class_stream_duplex" class="type">&#x3C;stream.Duplex></a></li>
</ul>
<h4>Event: <code>'blocked'</code><span><a class="mark" href="#quic_event_blocked" id="quic_event_blocked">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<p>Emitted when the <code>QuicStream</code> has been prevented from sending queued data for
the <code>QuicStream</code> due to congestion control.</p>
<h4>Event: <code>'close'</code><span><a class="mark" href="#quic_event_close_2" id="quic_event_close_2">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<p>Emitted when the <code>QuicStream</code> has is completely closed and the underlying
resources have been freed.</p>
<h4>Event: <code>'data'</code><span><a class="mark" href="#quic_event_data" id="quic_event_data">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<h4>Event: <code>'end'</code><span><a class="mark" href="#quic_event_end" id="quic_event_end">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<h4>Event: <code>'error'</code><span><a class="mark" href="#quic_event_error_2" id="quic_event_error_2">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<h4>Event: <code>'informationalHeaders'</code><span><a class="mark" href="#quic_event_informationalheaders" id="quic_event_informationalheaders">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<p>Emitted when the <code>QuicStream</code> has received a block of informational headers.</p>
<p>Support for headers depends entirely on the QUIC Application used as identified
by the <code>alpn</code> configuration option. In QUIC Applications that support headers,
informational header blocks typically come before initial headers.</p>
<p>The event handler is invoked with a single argument representing the block of
Headers as an object.</p>
<pre><code class="language-js">stream(<span class="hljs-string">'informationalHeaders'</span>, <span class="hljs-function">(<span class="hljs-params">headers</span>) =></span> {
  <span class="hljs-comment">// Use headers</span>
});</code></pre>
<h4>Event: <code>'initialHeaders'</code><span><a class="mark" href="#quic_event_initialheaders" id="quic_event_initialheaders">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<p>Emitted when the <code>QuicStream</code> has received a block of initial headers.</p>
<p>Support for headers depends entirely on the QUIC Application used as identified
by the <code>alpn</code> configuration option. HTTP/3, for instance, supports two kinds of
initial headers: request headers for HTTP request messages and response headers
for HTTP response messages. For HTTP/3 QUIC streams, request and response
headers are each emitted using the <code>'initialHeaders'</code> event.</p>
<p>The event handler is invoked with a single argument representing the block of
Headers as an object.</p>
<pre><code class="language-js">stream(<span class="hljs-string">'initialHeaders'</span>, <span class="hljs-function">(<span class="hljs-params">headers</span>) =></span> {
  <span class="hljs-comment">// Use headers</span>
});</code></pre>
<h4>Event: <code>'trailingHeaders'</code><span><a class="mark" href="#quic_event_trailingheaders" id="quic_event_trailingheaders">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<p>Emitted when the <code>QuicStream</code> has received a block of trailing headers.</p>
<p>Support for headers depends entirely on the QUIC Application used as identified
by the <code>alpn</code> configuration option. Trailing headers typically follow any data
transmitted on the <code>QuicStream</code>, and therefore typically emit sometime after the
last <code>'data'</code> event but before the <code>'close'</code> event. The precise timing may
vary from one QUIC application to another.</p>
<p>The event handler is invoked with a single argument representing the block of
Headers as an object.</p>
<pre><code class="language-js">stream(<span class="hljs-string">'trailingHeaders'</span>, <span class="hljs-function">(<span class="hljs-params">headers</span>) =></span> {
  <span class="hljs-comment">// Use headers</span>
});</code></pre>
<h4>Event: <code>'readable'</code><span><a class="mark" href="#quic_event_readable" id="quic_event_readable">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<h4><code>quicstream.bidirectional</code><span><a class="mark" href="#quic_quicstream_bidirectional" id="quic_quicstream_bidirectional">#</a></span></h4>
<!--YAML
added: v15.0.0
-->
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&#x3C;boolean></a></li>
</ul>
<p>When <code>true</code>, the <code>QuicStream</code> is bidirectional. Both the readable and
writable sides of the <code>QuicStream</code> <code>Duplex</code> are open.</p>
<p>Read-only.</p>
<h4><code>quicstream.bytesReceived</code><span><a class="mark" href="#quic_quicstream_bytesreceived" id="quic_quicstream_bytesreceived">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a></li>
</ul>
<p>The total number of bytes received for this <code>QuicStream</code>.</p>
<p>Read-only.</p>
<h4><code>quicstream.bytesSent</code><span><a class="mark" href="#quic_quicstream_bytessent" id="quic_quicstream_bytessent">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a></li>
</ul>
<p>The total number of bytes sent by this <code>QuicStream</code>.</p>
<p>Read-only.</p>
<h4><code>quicstream.clientInitiated</code><span><a class="mark" href="#quic_quicstream_clientinitiated" id="quic_quicstream_clientinitiated">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&#x3C;boolean></a></li>
</ul>
<p>Will be <code>true</code> if the <code>QuicStream</code> was initiated by a <code>QuicClientSession</code>
instance.</p>
<p>Read-only.</p>
<h4><code>quicstream.close()</code><span><a class="mark" href="#quic_quicstream_close" id="quic_quicstream_close">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Returns: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" class="type">&#x3C;Promise></a></li>
</ul>
<p>Closes the <code>QuicStream</code> by ending both sides of the <code>QuicStream</code> <code>Duplex</code>.
Returns a <code>Promise</code> that is resolved once the <code>QuicStream</code> has been destroyed.</p>
<h4><code>quicstream.dataAckHistogram</code><span><a class="mark" href="#quic_quicstream_dataackhistogram" id="quic_quicstream_dataackhistogram">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<p>TBD</p>
<h4><code>quicstream.dataRateHistogram</code><span><a class="mark" href="#quic_quicstream_dataratehistogram" id="quic_quicstream_dataratehistogram">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<p>TBD</p>
<h4><code>quicstream.dataSizeHistogram</code><span><a class="mark" href="#quic_quicstream_datasizehistogram" id="quic_quicstream_datasizehistogram">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<p>TBD</p>
<h4><code>quicstream.duration</code><span><a class="mark" href="#quic_quicstream_duration" id="quic_quicstream_duration">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a></li>
</ul>
<p>The length of time the <code>QuicStream</code> has been active.</p>
<p>Read-only.</p>
<h4><code>quicstream.finalSize</code><span><a class="mark" href="#quic_quicstream_finalsize" id="quic_quicstream_finalsize">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a></li>
</ul>
<p>The total number of bytes successfully received by the <code>QuicStream</code>.</p>
<p>Read-only.</p>
<h4><code>quicstream.id</code><span><a class="mark" href="#quic_quicstream_id" id="quic_quicstream_id">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a></li>
</ul>
<p>The numeric identifier of the <code>QuicStream</code>.</p>
<p>Read-only.</p>
<h4><code>quicstream.maxAcknowledgedOffset</code><span><a class="mark" href="#quic_quicstream_maxacknowledgedoffset" id="quic_quicstream_maxacknowledgedoffset">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a></li>
</ul>
<p>The highest acknowledged data offset received for this <code>QuicStream</code>.</p>
<p>Read-only.</p>
<h4><code>quicstream.maxExtendedOffset</code><span><a class="mark" href="#quic_quicstream_maxextendedoffset" id="quic_quicstream_maxextendedoffset">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a></li>
</ul>
<p>The maximum extended data offset that has been reported to the connected peer.</p>
<p>Read-only.</p>
<h4><code>quicstream.maxReceivedOffset</code><span><a class="mark" href="#quic_quicstream_maxreceivedoffset" id="quic_quicstream_maxreceivedoffset">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a></li>
</ul>
<p>The maximum received offset for this <code>QuicStream</code>.</p>
<p>Read-only.</p>
<h4><code>quicstream.pushStream(headers[, options])</code><span><a class="mark" href="#quic_quicstream_pushstream_headers_options" id="quic_quicstream_pushstream_headers_options">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>
<p><code>headers</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="type">&#x3C;Object></a> An object representing a block of headers to be
transmitted with the push promise.</p>
</li>
<li>
<p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="type">&#x3C;Object></a></p>
<ul>
<li><code>highWaterMark</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a> Total number of bytes that the <code>QuicStream</code> may
buffer internally before the <code>quicstream.write()</code> function starts returning
<code>false</code>. Default: <code>16384</code>.</li>
<li><code>defaultEncoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a> The default encoding that is used when no
encoding is specified as an argument to <code>quicstream.write()</code>. Default:
<code>'utf8'</code>.</li>
</ul>
</li>
<li>
<p>Returns: <a href="quic.html#quic_class_quicstream_extends_stream_duplex" class="type">&#x3C;QuicStream></a></p>
</li>
</ul>
<p>If the selected QUIC application protocol supports push streams, then the
<code>pushStream()</code> method will initiate a new push promise and create a new
unidirectional <code>QuicStream</code> object used to fulfill that push.</p>
<p>Currently only HTTP/3 supports the use of <code>pushStream()</code>.</p>
<p>If the selected QUIC application protocol does not support push streams, an
error will be thrown.</p>
<h4><code>quicstream.serverInitiated</code><span><a class="mark" href="#quic_quicstream_serverinitiated" id="quic_quicstream_serverinitiated">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&#x3C;boolean></a></li>
</ul>
<p>Will be <code>true</code> if the <code>QuicStream</code> was initiated by a <code>QuicServerSession</code>
instance.</p>
<p>Read-only.</p>
<h4><code>quicstream.session</code><span><a class="mark" href="#quic_quicstream_session" id="quic_quicstream_session">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="quic.html#quic_class_quicserversession_extends_quicsession" class="type">&#x3C;QuicSession></a></li>
</ul>
<p>The <code>QuicServerSession</code> or <code>QuicClientSession</code> to which the
<code>QuicStream</code> belongs.</p>
<p>Read-only.</p>
<h4><code>quicstream.sendFD(fd[, options])</code><span><a class="mark" href="#quic_quicstream_sendfd_fd_options" id="quic_quicstream_sendfd_fd_options">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a> | <a href="fs.html#fs_class_filehandle" class="type">&#x3C;FileHandle></a> A readable file descriptor.</li>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="type">&#x3C;Object></a>
<ul>
<li><code>offset</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a> The offset position at which to begin reading.
Default: <code>-1</code>.</li>
<li><code>length</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a> The amount of data from the fd to send.
Default: <code>-1</code>.</li>
</ul>
</li>
</ul>
<p>Instead of using a <code>QuicStream</code> as a writable stream, send data from a given
file descriptor.</p>
<p>If <code>offset</code> is set to a non-negative number, reading starts from that position
and the file offset will not be advanced.
If <code>length</code> is set to a non-negative number, it gives the maximum number of
bytes that are read from the file.</p>
<p>The file descriptor or <code>FileHandle</code> is not closed when the stream is closed,
so it will need to be closed manually once it is no longer needed.
Using the same file descriptor concurrently for multiple streams
is not supported and may result in data loss. Re-using a file descriptor
after a stream has finished is supported.</p>
<h4><code>quicstream.sendFile(path[, options])</code><span><a class="mark" href="#quic_quicstream_sendfile_path_options" id="quic_quicstream_sendfile_path_options">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a> | <a href="buffer.html#buffer_class_buffer" class="type">&#x3C;Buffer></a> | <a href="url.html#url_the_whatwg_url_api" class="type">&#x3C;URL></a></li>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="type">&#x3C;Object></a>
<ul>
<li><code>onError</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" class="type">&#x3C;Function></a> Callback function invoked in the case of an
error before send.</li>
<li><code>offset</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a> The offset position at which to begin reading.
Default: <code>-1</code>.</li>
<li><code>length</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a> The amount of data from the fd to send.
Default: <code>-1</code>.</li>
</ul>
</li>
</ul>
<p>Instead of using a <code>QuicStream</code> as a writable stream, send data from a given
file path.</p>
<p>The <code>options.onError</code> callback will be called if the file could not be opened.
If <code>offset</code> is set to a non-negative number, reading starts from that position.
If <code>length</code> is set to a non-negative number, it gives the maximum number of
bytes that are read from the file.</p>
<h4><code>quicstream.submitInformationalHeaders(headers)</code><span><a class="mark" href="#quic_quicstream_submitinformationalheaders_headers" id="quic_quicstream_submitinformationalheaders_headers">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li><code>headers</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="type">&#x3C;Object></a></li>
</ul>
<p>TBD</p>
<h4><code>quicstream.submitInitialHeaders(headers)</code><span><a class="mark" href="#quic_quicstream_submitinitialheaders_headers" id="quic_quicstream_submitinitialheaders_headers">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li><code>headers</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="type">&#x3C;Object></a></li>
</ul>
<p>TBD</p>
<h4><code>quicstream.submitTrailingHeaders(headers)</code><span><a class="mark" href="#quic_quicstream_submittrailingheaders_headers" id="quic_quicstream_submittrailingheaders_headers">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li><code>headers</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="type">&#x3C;Object></a></li>
</ul>
<p>TBD</p>
<h4><code>quicstream.unidirectional</code><span><a class="mark" href="#quic_quicstream_unidirectional" id="quic_quicstream_unidirectional">#</a></span></h4>
<div class="api_metadata">
<span>Added in: v15.0.0</span>
</div>
<ul>
<li>Type: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&#x3C;boolean></a></li>
</ul>
<p>Will be <code>true</code> if the <code>QuicStream</code> is unidirectional. Whether the <code>QuicStream</code>
will be readable or writable depends on whether the <code>quicstream.session</code> is
a <code>QuicClientSession</code> or <code>QuicServerSession</code>, and whether the <code>QuicStream</code>
was initiated locally or remotely.</p>



































<table><thead><tr><th><code>quicstream.session</code></th><th><code>quicstream.serverInitiated</code></th><th>Readable</th><th>Writable</th></tr></thead><tbody><tr><td><code>QuicClientSession</code></td><td><code>true</code></td><td>Y</td><td>N</td></tr><tr><td><code>QuicServerSession</code></td><td><code>true</code></td><td>N</td><td>Y</td></tr><tr><td><code>QuicClientSession</code></td><td><code>false</code></td><td>N</td><td>Y</td></tr><tr><td><code>QuicServerSession</code></td><td><code>false</code></td><td>Y</td><td>N</td></tr></tbody></table>



































<table><thead><tr><th><code>quicstream.session</code></th><th><code>quicstream.clientInitiated</code></th><th>Readable</th><th>Writable</th></tr></thead><tbody><tr><td><code>QuicClientSession</code></td><td><code>true</code></td><td>N</td><td>Y</td></tr><tr><td><code>QuicServerSession</code></td><td><code>true</code></td><td>Y</td><td>N</td></tr><tr><td><code>QuicClientSession</code></td><td><code>false</code></td><td>Y</td><td>N</td></tr><tr><td><code>QuicServerSession</code></td><td><code>false</code></td><td>N</td><td>Y</td></tr></tbody></table>
<p>Read-only.</p>
<h2>Additional notes<span><a class="mark" href="#quic_additional_notes" id="quic_additional_notes">#</a></span></h2>
<h3>Custom DNS lookup functions<span><a class="mark" href="#quic_custom_dns_lookup_functions" id="quic_custom_dns_lookup_functions">#</a></span></h3>
<p>By default, the QUIC implementation uses the <code>dns</code> module's
<a href="dns.html#dns_dnspromises_lookup_hostname_options">promisified version of <code>lookup()</code></a> to resolve domains names
into IP addresses. For most typical use cases, this will be
sufficient. However, it is possible to pass a custom <code>lookup</code>
function as an option in several places throughout the QUIC API:</p>
<ul>
<li><code>net.createQuicSocket()</code></li>
<li><code>quicsocket.addEndpoint()</code></li>
<li><code>quicsocket.connect()</code></li>
<li><code>quicsocket.listen()</code></li>
</ul>
<p>The custom <code>lookup</code> function must return a <code>Promise</code> that is
resolved once the lookup is complete. It will be invoked with
two arguments:</p>
<ul>
<li><code>address</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Undefined_type" class="type">&#x3C;undefined></a> The host name to resolve, or
<code>undefined</code> if no host name was provided.</li>
<li><code>family</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&#x3C;number></a> One of <code>4</code> or <code>6</code>, identifying either
IPv4 or IPv6.</li>
</ul>
<pre><code class="language-js"><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myCustomLookup</span>(<span class="hljs-params">address, type</span>) </span>{
  <span class="hljs-comment">// TODO(@jasnell): Make this example more useful</span>
  <span class="hljs-keyword">return</span> resolveTheAddressSomehow(address, type);
}</code></pre>
<h3>Online Certificate Status Protocol (OCSP)<span><a class="mark" href="#quic_online_certificate_status_protocol_ocsp" id="quic_online_certificate_status_protocol_ocsp">#</a></span></h3>
<p>The QUIC implementation supports use of OCSP during the TLS 1.3 handshake
of a new QUIC session.</p>
<h4>Requests<span><a class="mark" href="#quic_requests" id="quic_requests">#</a></span></h4>
<p>A <code>QuicServerSession</code> can receive and process OCSP requests by setting the
<code>ocspHandler</code> option in the <code>quicsocket.listen()</code> function. The value of
the <code>ocspHandler</code> is an async function that must return an object with the
OCSP response and, optionally, a new <a href="tls.html#tls_tls_createsecurecontext_options" class="type">&#x3C;tls.SecureContext></a> to use during the
handshake.</p>
<p>The handler function will be invoked with two arguments:</p>
<ul>
<li><code>type</code>: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a> Will always be <code>request</code> for <code>QuicServerSession</code>.</li>
<li><code>options</code>: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="type">&#x3C;Object></a>
<ul>
<li><code>servername</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a> The SNI server name.</li>
<li><code>context</code> <a href="tls.html#tls_tls_createsecurecontext_options" class="type">&#x3C;tls.SecureContext></a> The <code>SecureContext</code> currently used.</li>
</ul>
</li>
</ul>
<pre><code class="language-js"><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ocspServerHandler</span>(<span class="hljs-params">type, { servername, context }</span>) </span>{
  <span class="hljs-comment">// Process the request...</span>
  <span class="hljs-keyword">return</span> { <span class="hljs-attr">data</span>: Buffer.from(<span class="hljs-string">'The OCSP response'</span>) };
}

sock.listen({ <span class="hljs-attr">ocspHandler</span>: ocspServerHandler });</code></pre>
<h4>Responses<span><a class="mark" href="#quic_responses" id="quic_responses">#</a></span></h4>
<p>A <code>QuicClientSession</code> can receive and process OCSP responses by setting the
<code>ocspHandler</code> option in the <code>quicsocket.connect()</code> function. The value of
the <code>ocspHandler</code> is an async function with no expected return value.</p>
<p>The handler function will be invoked with two arguments:</p>
<ul>
<li><code>type</code>: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a> Will always be <code>response</code> for <code>QuicClientSession</code>.</li>
<li><code>options</code>: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="type">&#x3C;Object></a>
<ul>
<li><code>data</code>: <a href="buffer.html#buffer_class_buffer" class="type">&#x3C;Buffer></a> The OCSP response provided by the server</li>
</ul>
</li>
</ul>
<pre><code class="language-js"><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ocspClientHandler</span>(<span class="hljs-params">type, { data }</span>) </span>{
  <span class="hljs-built_in">console</span>.log(data.toString());
}

sock.connect({ <span class="hljs-attr">ocspHandler</span>: ocspClientHandler });</code></pre>
<h3>Handling client hello<span><a class="mark" href="#quic_handling_client_hello" id="quic_handling_client_hello">#</a></span></h3>
<p>When <code>quicsocket.listen()</code> is called, a <a href="tls.html#tls_tls_createsecurecontext_options" class="type">&#x3C;tls.SecureContext></a> is created and used
by default for all new <code>QuicServerSession</code> instances. There are times, however,
when the <a href="tls.html#tls_tls_createsecurecontext_options" class="type">&#x3C;tls.SecureContext></a> to be used for a <code>QuicSession</code> can only be
determined once the client initiates a connection. This is accomplished using
the <code>clientHelloHandler</code> option when calling <code>quicsocket.listen()</code>.</p>
<p>The value of <code>clientHelloHandler</code> is an async function that is called at the
start of a new <code>QuicServerSession</code>. It is invoked with three arguments:</p>
<ul>
<li><code>alpn</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a> The ALPN protocol identifier specified by the client.</li>
<li><code>servername</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string></a> The SNI server name specified by the client.</li>
<li><code>ciphers</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&#x3C;string[]></a> The array of TLS 1.3 ciphers specified by the client.</li>
</ul>
<p>The <code>clientHelloHandler</code> can return a new <a href="tls.html#tls_tls_createsecurecontext_options" class="type">&#x3C;tls.SecureContext></a> object that will
be used to continue the TLS handshake. If the function returns <code>undefined</code>, the
default <a href="tls.html#tls_tls_createsecurecontext_options" class="type">&#x3C;tls.SecureContext></a> will be used. Returning any other value will cause
an error to be thrown that will destroy the <code>QuicServerSession</code> instance.</p>
<pre><code class="language-js"><span class="hljs-keyword">const</span> server = createQuicSocket();

server.listen({
  <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-title">clientHelloHandler</span>(<span class="hljs-params">alpn, servername, ciphers</span>)</span> {
    <span class="hljs-built_in">console</span>.log(alpn);
    <span class="hljs-built_in">console</span>.log(servername);
    <span class="hljs-built_in">console</span>.log(ciphers);
  }
});</code></pre>
        <!-- API END -->
      </div>
    </div>
  </div>
</body>
</html>
